import{r as u}from"./chunk-KAOEMCTI-D0VL4AeO.js";import{c as f}from"./chunk-CNWEGOUF-qJr9DjGl.js";async function x(s,g){const r=f(s),i=[],{index:p="default",client:l,params:o={},tag:h}=g;if(p==="crawler"){const c=await l.search({...o,term:s,where:{category:h?{eq:h.slice(0,1).toUpperCase()+h.slice(1)}:void 0,...o.where},limit:10});if(!c)return i;for(const n of c.hits){const e=n.document;i.push({id:n.id,type:"page",content:e.title,contentWithHighlights:r.highlight(e.title),url:e.path},{id:"page"+n.id,type:"text",content:e.content,contentWithHighlights:r.highlight(e.content),url:e.path})}return i}const d={...o,term:s,where:u({tag:h,...o.where}),groupBy:{properties:["page_id"],maxResult:7,...o.groupBy}},a=await l.search(d);if(!a||!a.groups)return i;for(const c of a.groups){let n=!1;for(const e of c.result){const t=e.document;n||(i.push({id:t.page_id,type:"page",content:t.title,contentWithHighlights:r.highlight(t.title),url:t.url}),n=!0),i.push({id:t.id,content:t.content,contentWithHighlights:r.highlight(t.content),type:t.content===t.section?"heading":"text",url:t.section_id?`${t.url}#${t.section_id}`:t.url})}}return i}export{x as searchDocs};
