import{c as u}from"./chunk-CNWEGOUF-qJr9DjGl.js";function h(e){const n=[],i=new Set;for(const t of e)i.has(t.url)||(i.add(t.url),n.push({id:t.url,type:"page",url:t.url,content:t.title})),n.push({id:t.objectID,type:t.content===t.section?"heading":"text",url:t.section_id?`${t.url}#${t.section_id}`:t.url,content:t.content});return n}async function g(e,{indexName:n,onSearch:i,client:t,locale:o,tag:s}){if(e.trim().length===0)return[];const c=i?await i(e,s,o):await t.searchForHits({requests:[{type:"default",indexName:n,query:e,distinct:5,hitsPerPage:10,filters:s?`tag:${s}`:void 0}]}),l=u(e);return h(c.results[0].hits).flatMap(r=>r.type==="page"?{...r,contentWithHighlights:r.contentWithHighlights??l.highlight(r.content)}:[])}export{h as groupResults,g as searchDocs};
