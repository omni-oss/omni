import{createRequire as Dz}from"node:module";var wz=Object.create;var{getPrototypeOf:Lz,defineProperty:G6,getOwnPropertyNames:Mz}=Object;var Nz=Object.prototype.hasOwnProperty;var wZ=(Z,z,K)=>{K=Z!=null?wz(Lz(Z)):{};let $=z||!Z||!Z.__esModule?G6(K,"default",{value:Z,enumerable:!0}):K;for(let H of Mz(Z))if(!Nz.call($,H))G6($,H,{get:()=>Z[H],enumerable:!0});return $};var y=(Z,z)=>()=>(z||Z((z={exports:{}}).exports,z),z.exports);var HZ=Dz(import.meta.url);var M6=y((L6)=>{Object.defineProperty(L6,"__esModule",{value:!0});L6.range=L6.balanced=void 0;var vz=(Z,z,K)=>{let $=Z instanceof RegExp?w6(Z,K):Z,H=z instanceof RegExp?w6(z,K):z,V=$!==null&&H!=null&&L6.range($,H,K);return V&&{start:V[0],end:V[1],pre:K.slice(0,V[0]),body:K.slice(V[0]+$.length,V[1]),post:K.slice(V[1]+H.length)}};L6.balanced=vz;var w6=(Z,z)=>{let K=z.match(Z);return K?K[0]:null},Cz=(Z,z,K)=>{let $,H,V,Q=void 0,Y,J=K.indexOf(Z),U=K.indexOf(z,J+1),X=J;if(J>=0&&U>0){if(Z===z)return[J,U];$=[],V=K.length;while(X>=0&&!Y){if(X===J)$.push(X),J=K.indexOf(Z,X+1);else if($.length===1){let q=$.pop();if(q!==void 0)Y=[q,U]}else{if(H=$.pop(),H!==void 0&&H<V)V=H,Q=U;U=K.indexOf(z,X+1)}X=J<U&&J>=0?J:U}if($.length&&Q!==void 0)Y=[V,Q]}return Y};L6.range=Cz});var E6=y((A6)=>{Object.defineProperty(A6,"__esModule",{value:!0});A6.expand=fz;var N6=M6(),D6="\x00SLASH"+Math.random()+"\x00",v6="\x00OPEN"+Math.random()+"\x00",j0="\x00CLOSE"+Math.random()+"\x00",C6="\x00COMMA"+Math.random()+"\x00",P6="\x00PERIOD"+Math.random()+"\x00",Rz=new RegExp(D6,"g"),Az=new RegExp(v6,"g"),Ez=new RegExp(j0,"g"),Oz=new RegExp(C6,"g"),Sz=new RegExp(P6,"g"),Tz=/\\\\/g,yz=/\\{/g,kz=/\\}/g,bz=/\\,/g,xz=/\\./g;function I0(Z){return!isNaN(Z)?parseInt(Z,10):Z.charCodeAt(0)}function hz(Z){return Z.replace(Tz,D6).replace(yz,v6).replace(kz,j0).replace(bz,C6).replace(xz,P6)}function _z(Z){return Z.replace(Rz,"\\").replace(Az,"{").replace(Ez,"}").replace(Oz,",").replace(Sz,".")}function R6(Z){if(!Z)return[""];let z=[],K=(0,N6.balanced)("{","}",Z);if(!K)return Z.split(",");let{pre:$,body:H,post:V}=K,Q=$.split(",");Q[Q.length-1]+="{"+H+"}";let Y=R6(V);if(V.length)Q[Q.length-1]+=Y.shift(),Q.push.apply(Q,Y);return z.push.apply(z,Q),z}function fz(Z){if(!Z)return[];if(Z.slice(0,2)==="{}")Z="\\{\\}"+Z.slice(2);return LZ(hz(Z),!0).map(_z)}function dz(Z){return"{"+Z+"}"}function cz(Z){return/^-?0\d/.test(Z)}function gz(Z,z){return Z<=z}function mz(Z,z){return Z>=z}function LZ(Z,z){let K=[],$=(0,N6.balanced)("{","}",Z);if(!$)return[Z];let H=$.pre,V=$.post.length?LZ($.post,!1):[""];if(/\$$/.test($.pre))for(let Q=0;Q<V.length;Q++){let Y=H+"{"+$.body+"}"+V[Q];K.push(Y)}else{let Q=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test($.body),Y=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test($.body),J=Q||Y,U=$.body.indexOf(",")>=0;if(!J&&!U){if($.post.match(/,(?!,).*\}/))return Z=$.pre+"{"+$.body+j0+$.post,LZ(Z);return[Z]}let X;if(J)X=$.body.split(/\.\./);else if(X=R6($.body),X.length===1&&X[0]!==void 0){if(X=LZ(X[0],!1).map(dz),X.length===1)return V.map((W)=>$.pre+X[0]+W)}let q;if(J&&X[0]!==void 0&&X[1]!==void 0){let W=I0(X[0]),B=I0(X[1]),N=Math.max(X[0].length,X[1].length),L=X.length===3&&X[2]!==void 0?Math.abs(I0(X[2])):1,P=gz;if(B<W)L*=-1,P=mz;let k=X.some(cz);q=[];for(let T=W;P(T,B);T+=L){let S;if(Y){if(S=String.fromCharCode(T),S==="\\")S=""}else if(S=String(T),k){let $Z=N-S.length;if($Z>0){let e=Array($Z+1).join("0");if(T<0)S="-"+e+S.slice(1);else S=e+S}}q.push(S)}}else{q=[];for(let W=0;W<X.length;W++)q.push.apply(q,LZ(X[W],!1))}for(let W=0;W<q.length;W++)for(let B=0;B<V.length;B++){let N=H+q[W]+V[B];if(!z||J||N)K.push(N)}}return K}});var T6=y((O6)=>{Object.defineProperty(O6,"__esModule",{value:!0});O6.assertValidPattern=void 0;var lz=65536,pz=(Z)=>{if(typeof Z!=="string")throw TypeError("invalid pattern");if(Z.length>lz)throw TypeError("pattern is too long")};O6.assertValidPattern=pz});var x6=y((k6)=>{Object.defineProperty(k6,"__esModule",{value:!0});k6.parseClass=void 0;var oz={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},MZ=(Z)=>Z.replace(/[[\]\\-]/g,"\\$&"),nz=(Z)=>Z.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),y6=(Z)=>Z.join(""),iz=(Z,z)=>{let K=z;if(Z.charAt(K)!=="[")throw Error("not in a brace expression");let $=[],H=[],V=K+1,Q=!1,Y=!1,J=!1,U=!1,X=K,q="";Z:while(V<Z.length){let L=Z.charAt(V);if((L==="!"||L==="^")&&V===K+1){U=!0,V++;continue}if(L==="]"&&Q&&!J){X=V+1;break}if(Q=!0,L==="\\"){if(!J){J=!0,V++;continue}}if(L==="["&&!J){for(let[P,[h,k,T]]of Object.entries(oz))if(Z.startsWith(P,V)){if(q)return["$.",!1,Z.length-K,!0];if(V+=P.length,T)H.push(h);else $.push(h);Y=Y||k;continue Z}}if(J=!1,q){if(L>q)$.push(MZ(q)+"-"+MZ(L));else if(L===q)$.push(MZ(L));q="",V++;continue}if(Z.startsWith("-]",V+1)){$.push(MZ(L+"-")),V+=2;continue}if(Z.startsWith("-",V+1)){q=L,V+=2;continue}$.push(MZ(L)),V++}if(X<V)return["",!1,0,!1];if(!$.length&&!H.length)return["$.",!1,Z.length-K,!0];if(H.length===0&&$.length===1&&/^\\?.$/.test($[0])&&!U){let L=$[0].length===2?$[0].slice(-1):$[0];return[nz(L),!1,X-K,!1]}let W="["+(U?"^":"")+y6($)+"]",B="["+(U?"":"^")+y6(H)+"]";return[$.length&&H.length?"("+W+"|"+B+")":$.length?W:B,Y,X-K,!0]};k6.parseClass=iz});var bZ=y((h6)=>{Object.defineProperty(h6,"__esModule",{value:!0});h6.unescape=void 0;var az=(Z,{windowsPathsNoEscape:z=!1}={})=>{return z?Z.replace(/\[([^\/\\])\]/g,"$1"):Z.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1")};h6.unescape=az});var G0=y((g6)=>{Object.defineProperty(g6,"__esModule",{value:!0});g6.AST=void 0;var sz=x6(),xZ=bZ(),rz=new Set(["!","?","+","*","@"]),f6=(Z)=>rz.has(Z),tz="(?!(?:^|/)\\.\\.?(?:$|/))",hZ="(?!\\.)",ez=new Set(["[","."]),ZK=new Set(["..","."]),zK=new Set("().*{}+?[]^$\\!"),KK=(Z)=>Z.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),F0="[^/]",d6=F0+"*?",c6=F0+"+?";class d{type;#K;#$;#V=!1;#Z=[];#z;#Q;#X;#Y=!1;#H;#J;#W=!1;constructor(Z,z,K={}){if(this.type=Z,Z)this.#$=!0;if(this.#z=z,this.#K=this.#z?this.#z.#K:this,this.#H=this.#K===this?K:this.#K.#H,this.#X=this.#K===this?[]:this.#K.#X,Z==="!"&&!this.#K.#Y)this.#X.push(this);this.#Q=this.#z?this.#z.#Z.length:0}get hasMagic(){if(this.#$!==void 0)return this.#$;for(let Z of this.#Z){if(typeof Z==="string")continue;if(Z.type||Z.hasMagic)return this.#$=!0}return this.#$}toString(){if(this.#J!==void 0)return this.#J;if(!this.type)return this.#J=this.#Z.map((Z)=>String(Z)).join("");else return this.#J=this.type+"("+this.#Z.map((Z)=>String(Z)).join("|")+")"}#B(){if(this!==this.#K)throw Error("should only call on root");if(this.#Y)return this;this.toString(),this.#Y=!0;let Z;while(Z=this.#X.pop()){if(Z.type!=="!")continue;let z=Z,K=z.#z;while(K){for(let $=z.#Q+1;!K.type&&$<K.#Z.length;$++)for(let H of Z.#Z){if(typeof H==="string")throw Error("string part in extglob AST??");H.copyIn(K.#Z[$])}z=K,K=z.#z}}return this}push(...Z){for(let z of Z){if(z==="")continue;if(typeof z!=="string"&&!(z instanceof d&&z.#z===this))throw Error("invalid part: "+z);this.#Z.push(z)}}toJSON(){let Z=this.type===null?this.#Z.slice().map((z)=>typeof z==="string"?z:z.toJSON()):[this.type,...this.#Z.map((z)=>z.toJSON())];if(this.isStart()&&!this.type)Z.unshift([]);if(this.isEnd()&&(this===this.#K||this.#K.#Y&&this.#z?.type==="!"))Z.push({});return Z}isStart(){if(this.#K===this)return!0;if(!this.#z?.isStart())return!1;if(this.#Q===0)return!0;let Z=this.#z;for(let z=0;z<this.#Q;z++){let K=Z.#Z[z];if(!(K instanceof d&&K.type==="!"))return!1}return!0}isEnd(){if(this.#K===this)return!0;if(this.#z?.type==="!")return!0;if(!this.#z?.isEnd())return!1;if(!this.type)return this.#z?.isEnd();let Z=this.#z?this.#z.#Z.length:0;return this.#Q===Z-1}copyIn(Z){if(typeof Z==="string")this.push(Z);else this.push(Z.clone(this))}clone(Z){let z=new d(this.type,Z);for(let K of this.#Z)z.copyIn(K);return z}static#q(Z,z,K,$){let H=!1,V=!1,Q=-1,Y=!1;if(z.type===null){let W=K,B="";while(W<Z.length){let N=Z.charAt(W++);if(H||N==="\\"){H=!H,B+=N;continue}if(V){if(W===Q+1){if(N==="^"||N==="!")Y=!0}else if(N==="]"&&!(W===Q+2&&Y))V=!1;B+=N;continue}else if(N==="["){V=!0,Q=W,Y=!1,B+=N;continue}if(!$.noext&&f6(N)&&Z.charAt(W)==="("){z.push(B),B="";let L=new d(N,z);W=d.#q(Z,L,W,$),z.push(L);continue}B+=N}return z.push(B),W}let J=K+1,U=new d(null,z),X=[],q="";while(J<Z.length){let W=Z.charAt(J++);if(H||W==="\\"){H=!H,q+=W;continue}if(V){if(J===Q+1){if(W==="^"||W==="!")Y=!0}else if(W==="]"&&!(J===Q+2&&Y))V=!1;q+=W;continue}else if(W==="["){V=!0,Q=J,Y=!1,q+=W;continue}if(f6(W)&&Z.charAt(J)==="("){U.push(q),q="";let B=new d(W,U);U.push(B),J=d.#q(Z,B,J,$);continue}if(W==="|"){U.push(q),q="",X.push(U),U=new d(null,z);continue}if(W===")"){if(q===""&&z.#Z.length===0)z.#W=!0;return U.push(q),q="",z.push(...X,U),J}q+=W}return z.type=null,z.#$=void 0,z.#Z=[Z.substring(K-1)],J}static fromGlob(Z,z={}){let K=new d(null,void 0,z);return d.#q(Z,K,0,z),K}toMMPattern(){if(this!==this.#K)return this.#K.toMMPattern();let Z=this.toString(),[z,K,$,H]=this.toRegExpSource();if(!($||this.#$||this.#H.nocase&&!this.#H.nocaseMagicOnly&&Z.toUpperCase()!==Z.toLowerCase()))return K;let Q=(this.#H.nocase?"i":"")+(H?"u":"");return Object.assign(new RegExp(`^${z}$`,Q),{_src:z,_glob:Z})}get options(){return this.#H}toRegExpSource(Z){let z=Z??!!this.#H.dot;if(this.#K===this)this.#B();if(!this.type){let Y=this.isStart()&&this.isEnd(),J=this.#Z.map((W)=>{let[B,N,L,P]=typeof W==="string"?d.#I(W,this.#$,Y):W.toRegExpSource(Z);return this.#$=this.#$||L,this.#V=this.#V||P,B}).join(""),U="";if(this.isStart()){if(typeof this.#Z[0]==="string"){if(!(this.#Z.length===1&&ZK.has(this.#Z[0]))){let B=ez,N=z&&B.has(J.charAt(0))||J.startsWith("\\.")&&B.has(J.charAt(2))||J.startsWith("\\.\\.")&&B.has(J.charAt(4)),L=!z&&!Z&&B.has(J.charAt(0));U=N?tz:L?hZ:""}}}let X="";if(this.isEnd()&&this.#K.#Y&&this.#z?.type==="!")X="(?:$|\\/)";return[U+J+X,(0,xZ.unescape)(J),this.#$=!!this.#$,this.#V]}let K=this.type==="*"||this.type==="+",$=this.type==="!"?"(?:(?!(?:":"(?:",H=this.#U(z);if(this.isStart()&&this.isEnd()&&!H&&this.type!=="!"){let Y=this.toString();return this.#Z=[Y],this.type=null,this.#$=void 0,[Y,(0,xZ.unescape)(this.toString()),!1,!1]}let V=!K||Z||z||!hZ?"":this.#U(!0);if(V===H)V="";if(V)H=`(?:${H})(?:${V})*?`;let Q="";if(this.type==="!"&&this.#W)Q=(this.isStart()&&!z?hZ:"")+c6;else{let Y=this.type==="!"?"))"+(this.isStart()&&!z&&!Z?hZ:"")+d6+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&V?")":this.type==="*"&&V?")?":`)${this.type}`;Q=$+H+Y}return[Q,(0,xZ.unescape)(H),this.#$=!!this.#$,this.#V]}#U(Z){return this.#Z.map((z)=>{if(typeof z==="string")throw Error("string type in extglob ast??");let[K,$,H,V]=z.toRegExpSource(Z);return this.#V=this.#V||V,K}).filter((z)=>!(this.isStart()&&this.isEnd())||!!z).join("|")}static#I(Z,z,K=!1){let $=!1,H="",V=!1;for(let Q=0;Q<Z.length;Q++){let Y=Z.charAt(Q);if($){$=!1,H+=(zK.has(Y)?"\\":"")+Y;continue}if(Y==="\\"){if(Q===Z.length-1)H+="\\\\";else $=!0;continue}if(Y==="["){let[J,U,X,q]=(0,sz.parseClass)(Z,Q);if(X){H+=J,V=V||U,Q+=X-1,z=z||q;continue}}if(Y==="*"){if(K&&Z==="*")H+=c6;else H+=d6;z=!0;continue}if(Y==="?"){H+=F0,z=!0;continue}H+=KK(Y)}return[H,(0,xZ.unescape)(Z),!!z,V]}}g6.AST=d});var w0=y((u6)=>{Object.defineProperty(u6,"__esModule",{value:!0});u6.escape=void 0;var $K=(Z,{windowsPathsNoEscape:z=!1}={})=>{return z?Z.replace(/[?*()[\]]/g,"[$&]"):Z.replace(/[?*()[\]\\]/g,"\\$&")};u6.escape=$K});var K7=y((NZ)=>{Object.defineProperty(NZ,"__esModule",{value:!0});NZ.unescape=NZ.escape=NZ.AST=NZ.Minimatch=NZ.match=NZ.makeRe=NZ.braceExpand=NZ.defaults=NZ.filter=NZ.GLOBSTAR=NZ.sep=NZ.minimatch=void 0;var HK=E6(),_Z=T6(),n6=G0(),VK=w0(),QK=bZ(),YK=(Z,z,K={})=>{if((0,_Z.assertValidPattern)(z),!K.nocomment&&z.charAt(0)==="#")return!1;return new qZ(z,K).match(Z)};NZ.minimatch=YK;var XK=/^\*+([^+@!?\*\[\(]*)$/,JK=(Z)=>(z)=>!z.startsWith(".")&&z.endsWith(Z),qK=(Z)=>(z)=>z.endsWith(Z),WK=(Z)=>{return Z=Z.toLowerCase(),(z)=>!z.startsWith(".")&&z.toLowerCase().endsWith(Z)},UK=(Z)=>{return Z=Z.toLowerCase(),(z)=>z.toLowerCase().endsWith(Z)},BK=/^\*+\.\*+$/,IK=(Z)=>!Z.startsWith(".")&&Z.includes("."),jK=(Z)=>Z!=="."&&Z!==".."&&Z.includes("."),FK=/^\.\*+$/,GK=(Z)=>Z!=="."&&Z!==".."&&Z.startsWith("."),wK=/^\*+$/,LK=(Z)=>Z.length!==0&&!Z.startsWith("."),MK=(Z)=>Z.length!==0&&Z!=="."&&Z!=="..",NK=/^\?+([^+@!?\*\[\(]*)?$/,DK=([Z,z=""])=>{let K=i6([Z]);if(!z)return K;return z=z.toLowerCase(),($)=>K($)&&$.toLowerCase().endsWith(z)},vK=([Z,z=""])=>{let K=a6([Z]);if(!z)return K;return z=z.toLowerCase(),($)=>K($)&&$.toLowerCase().endsWith(z)},CK=([Z,z=""])=>{let K=a6([Z]);return!z?K:($)=>K($)&&$.endsWith(z)},PK=([Z,z=""])=>{let K=i6([Z]);return!z?K:($)=>K($)&&$.endsWith(z)},i6=([Z])=>{let z=Z.length;return(K)=>K.length===z&&!K.startsWith(".")},a6=([Z])=>{let z=Z.length;return(K)=>K.length===z&&K!=="."&&K!==".."},s6=typeof process==="object"&&process?typeof process.env==="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",p6={win32:{sep:"\\"},posix:{sep:"/"}};NZ.sep=s6==="win32"?p6.win32.sep:p6.posix.sep;NZ.minimatch.sep=NZ.sep;NZ.GLOBSTAR=Symbol("globstar **");NZ.minimatch.GLOBSTAR=NZ.GLOBSTAR;var RK="[^/]",AK=RK+"*?",EK="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",OK="(?:(?!(?:\\/|^)\\.).)*?",SK=(Z,z={})=>(K)=>NZ.minimatch(K,Z,z);NZ.filter=SK;NZ.minimatch.filter=NZ.filter;var o=(Z,z={})=>Object.assign({},Z,z),TK=(Z)=>{if(!Z||typeof Z!=="object"||!Object.keys(Z).length)return NZ.minimatch;let z=NZ.minimatch;return Object.assign(($,H,V={})=>z($,H,o(Z,V)),{Minimatch:class extends z.Minimatch{constructor(H,V={}){super(H,o(Z,V))}static defaults(H){return z.defaults(o(Z,H)).Minimatch}},AST:class extends z.AST{constructor(H,V,Q={}){super(H,V,o(Z,Q))}static fromGlob(H,V={}){return z.AST.fromGlob(H,o(Z,V))}},unescape:($,H={})=>z.unescape($,o(Z,H)),escape:($,H={})=>z.escape($,o(Z,H)),filter:($,H={})=>z.filter($,o(Z,H)),defaults:($)=>z.defaults(o(Z,$)),makeRe:($,H={})=>z.makeRe($,o(Z,H)),braceExpand:($,H={})=>z.braceExpand($,o(Z,H)),match:($,H,V={})=>z.match($,H,o(Z,V)),sep:z.sep,GLOBSTAR:NZ.GLOBSTAR})};NZ.defaults=TK;NZ.minimatch.defaults=NZ.defaults;var yK=(Z,z={})=>{if((0,_Z.assertValidPattern)(Z),z.nobrace||!/\{(?:(?!\{).)*\}/.test(Z))return[Z];return(0,HK.expand)(Z)};NZ.braceExpand=yK;NZ.minimatch.braceExpand=NZ.braceExpand;var kK=(Z,z={})=>new qZ(Z,z).makeRe();NZ.makeRe=kK;NZ.minimatch.makeRe=NZ.makeRe;var bK=(Z,z,K={})=>{let $=new qZ(z,K);if(Z=Z.filter((H)=>$.match(H)),$.options.nonull&&!Z.length)Z.push(z);return Z};NZ.match=bK;NZ.minimatch.match=NZ.match;var o6=/[?*]|[+@!]\(.*?\)|\[|\]/,xK=(Z)=>Z.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class qZ{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(Z,z={}){if((0,_Z.assertValidPattern)(Z),z=z||{},this.options=z,this.pattern=Z,this.platform=z.platform||s6,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!z.windowsPathsNoEscape||z.allowWindowsEscape===!1,this.windowsPathsNoEscape)this.pattern=this.pattern.replace(/\\/g,"/");this.preserveMultipleSlashes=!!z.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!z.nonegate,this.comment=!1,this.empty=!1,this.partial=!!z.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=z.windowsNoMagicRoot!==void 0?z.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let Z of this.set)for(let z of Z)if(typeof z!=="string")return!0;return!1}debug(...Z){}make(){let Z=this.pattern,z=this.options;if(!z.nocomment&&Z.charAt(0)==="#"){this.comment=!0;return}if(!Z){this.empty=!0;return}if(this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],z.debug)this.debug=(...H)=>console.error(...H);this.debug(this.pattern,this.globSet);let K=this.globSet.map((H)=>this.slashSplit(H));this.globParts=this.preprocess(K),this.debug(this.pattern,this.globParts);let $=this.globParts.map((H,V,Q)=>{if(this.isWindows&&this.windowsNoMagicRoot){let Y=H[0]===""&&H[1]===""&&(H[2]==="?"||!o6.test(H[2]))&&!o6.test(H[3]),J=/^[a-z]:/i.test(H[0]);if(Y)return[...H.slice(0,4),...H.slice(4).map((U)=>this.parse(U))];else if(J)return[H[0],...H.slice(1).map((U)=>this.parse(U))]}return H.map((Y)=>this.parse(Y))});if(this.debug(this.pattern,$),this.set=$.filter((H)=>H.indexOf(!1)===-1),this.isWindows)for(let H=0;H<this.set.length;H++){let V=this.set[H];if(V[0]===""&&V[1]===""&&this.globParts[H][2]==="?"&&typeof V[3]==="string"&&/^[a-z]:$/i.test(V[3]))V[2]="?"}this.debug(this.pattern,this.set)}preprocess(Z){if(this.options.noglobstar){for(let K=0;K<Z.length;K++)for(let $=0;$<Z[K].length;$++)if(Z[K][$]==="**")Z[K][$]="*"}let{optimizationLevel:z=1}=this.options;if(z>=2)Z=this.firstPhasePreProcess(Z),Z=this.secondPhasePreProcess(Z);else if(z>=1)Z=this.levelOneOptimize(Z);else Z=this.adjascentGlobstarOptimize(Z);return Z}adjascentGlobstarOptimize(Z){return Z.map((z)=>{let K=-1;while((K=z.indexOf("**",K+1))!==-1){let $=K;while(z[$+1]==="**")$++;if($!==K)z.splice(K,$-K)}return z})}levelOneOptimize(Z){return Z.map((z)=>{return z=z.reduce((K,$)=>{let H=K[K.length-1];if($==="**"&&H==="**")return K;if($===".."){if(H&&H!==".."&&H!=="."&&H!=="**")return K.pop(),K}return K.push($),K},[]),z.length===0?[""]:z})}levelTwoFileOptimize(Z){if(!Array.isArray(Z))Z=this.slashSplit(Z);let z=!1;do{if(z=!1,!this.preserveMultipleSlashes){for(let $=1;$<Z.length-1;$++){let H=Z[$];if($===1&&H===""&&Z[0]==="")continue;if(H==="."||H==="")z=!0,Z.splice($,1),$--}if(Z[0]==="."&&Z.length===2&&(Z[1]==="."||Z[1]===""))z=!0,Z.pop()}let K=0;while((K=Z.indexOf("..",K+1))!==-1){let $=Z[K-1];if($&&$!=="."&&$!==".."&&$!=="**")z=!0,Z.splice(K-1,2),K-=2}}while(z);return Z.length===0?[""]:Z}firstPhasePreProcess(Z){let z=!1;do{z=!1;for(let K of Z){let $=-1;while(($=K.indexOf("**",$+1))!==-1){let V=$;while(K[V+1]==="**")V++;if(V>$)K.splice($+1,V-$);let Q=K[$+1],Y=K[$+2],J=K[$+3];if(Q!=="..")continue;if(!Y||Y==="."||Y===".."||!J||J==="."||J==="..")continue;z=!0,K.splice($,1);let U=K.slice(0);U[$]="**",Z.push(U),$--}if(!this.preserveMultipleSlashes){for(let V=1;V<K.length-1;V++){let Q=K[V];if(V===1&&Q===""&&K[0]==="")continue;if(Q==="."||Q==="")z=!0,K.splice(V,1),V--}if(K[0]==="."&&K.length===2&&(K[1]==="."||K[1]===""))z=!0,K.pop()}let H=0;while((H=K.indexOf("..",H+1))!==-1){let V=K[H-1];if(V&&V!=="."&&V!==".."&&V!=="**"){z=!0;let Y=H===1&&K[H+1]==="**"?["."]:[];if(K.splice(H-1,2,...Y),K.length===0)K.push("");H-=2}}}}while(z);return Z}secondPhasePreProcess(Z){for(let z=0;z<Z.length-1;z++)for(let K=z+1;K<Z.length;K++){let $=this.partsMatch(Z[z],Z[K],!this.preserveMultipleSlashes);if($){Z[z]=[],Z[K]=$;break}}return Z.filter((z)=>z.length)}partsMatch(Z,z,K=!1){let $=0,H=0,V=[],Q="";while($<Z.length&&H<z.length)if(Z[$]===z[H])V.push(Q==="b"?z[H]:Z[$]),$++,H++;else if(K&&Z[$]==="**"&&z[H]===Z[$+1])V.push(Z[$]),$++;else if(K&&z[H]==="**"&&Z[$]===z[H+1])V.push(z[H]),H++;else if(Z[$]==="*"&&z[H]&&(this.options.dot||!z[H].startsWith("."))&&z[H]!=="**"){if(Q==="b")return!1;Q="a",V.push(Z[$]),$++,H++}else if(z[H]==="*"&&Z[$]&&(this.options.dot||!Z[$].startsWith("."))&&Z[$]!=="**"){if(Q==="a")return!1;Q="b",V.push(z[H]),$++,H++}else return!1;return Z.length===z.length&&V}parseNegate(){if(this.nonegate)return;let Z=this.pattern,z=!1,K=0;for(let $=0;$<Z.length&&Z.charAt($)==="!";$++)z=!z,K++;if(K)this.pattern=Z.slice(K);this.negate=z}matchOne(Z,z,K=!1){let $=this.options;if(this.isWindows){let N=typeof Z[0]==="string"&&/^[a-z]:$/i.test(Z[0]),L=!N&&Z[0]===""&&Z[1]===""&&Z[2]==="?"&&/^[a-z]:$/i.test(Z[3]),P=typeof z[0]==="string"&&/^[a-z]:$/i.test(z[0]),h=!P&&z[0]===""&&z[1]===""&&z[2]==="?"&&typeof z[3]==="string"&&/^[a-z]:$/i.test(z[3]),k=L?3:N?0:void 0,T=h?3:P?0:void 0;if(typeof k==="number"&&typeof T==="number"){let[S,$Z]=[Z[k],z[T]];if(S.toLowerCase()===$Z.toLowerCase()){if(z[T]=S,T>k)z=z.slice(T);else if(k>T)Z=Z.slice(k)}}}let{optimizationLevel:H=1}=this.options;if(H>=2)Z=this.levelTwoFileOptimize(Z);this.debug("matchOne",this,{file:Z,pattern:z}),this.debug("matchOne",Z.length,z.length);for(var V=0,Q=0,Y=Z.length,J=z.length;V<Y&&Q<J;V++,Q++){this.debug("matchOne loop");var U=z[Q],X=Z[V];if(this.debug(z,U,X),U===!1)return!1;if(U===NZ.GLOBSTAR){this.debug("GLOBSTAR",[z,U,X]);var q=V,W=Q+1;if(W===J){this.debug("** at the end");for(;V<Y;V++)if(Z[V]==="."||Z[V]===".."||!$.dot&&Z[V].charAt(0)===".")return!1;return!0}while(q<Y){var B=Z[q];if(this.debug(`
globstar while`,Z,q,z,W,B),this.matchOne(Z.slice(q),z.slice(W),K))return this.debug("globstar found match!",q,Y,B),!0;else{if(B==="."||B===".."||!$.dot&&B.charAt(0)==="."){this.debug("dot detected!",Z,q,z,W);break}this.debug("globstar swallow a segment, and continue"),q++}}if(K){if(this.debug(`
>>> no match, partial?`,Z,q,z,W),q===Y)return!0}return!1}let N;if(typeof U==="string")N=X===U,this.debug("string match",U,X,N);else N=U.test(X),this.debug("pattern match",U,X,N);if(!N)return!1}if(V===Y&&Q===J)return!0;else if(V===Y)return K;else if(Q===J)return V===Y-1&&Z[V]==="";else throw Error("wtf?")}braceExpand(){return NZ.braceExpand(this.pattern,this.options)}parse(Z){(0,_Z.assertValidPattern)(Z);let z=this.options;if(Z==="**")return NZ.GLOBSTAR;if(Z==="")return"";let K,$=null;if(K=Z.match(wK))$=z.dot?MK:LK;else if(K=Z.match(XK))$=(z.nocase?z.dot?UK:WK:z.dot?qK:JK)(K[1]);else if(K=Z.match(NK))$=(z.nocase?z.dot?vK:DK:z.dot?CK:PK)(K);else if(K=Z.match(BK))$=z.dot?jK:IK;else if(K=Z.match(FK))$=GK;let H=n6.AST.fromGlob(Z,this.options).toMMPattern();if($&&typeof H==="object")Reflect.defineProperty(H,"test",{value:$});return H}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let Z=this.set;if(!Z.length)return this.regexp=!1,this.regexp;let z=this.options,K=z.noglobstar?AK:z.dot?EK:OK,$=new Set(z.nocase?["i"]:[]),H=Z.map((Y)=>{let J=Y.map((U)=>{if(U instanceof RegExp)for(let X of U.flags.split(""))$.add(X);return typeof U==="string"?xK(U):U===NZ.GLOBSTAR?NZ.GLOBSTAR:U._src});return J.forEach((U,X)=>{let q=J[X+1],W=J[X-1];if(U!==NZ.GLOBSTAR||W===NZ.GLOBSTAR)return;if(W===void 0)if(q!==void 0&&q!==NZ.GLOBSTAR)J[X+1]="(?:\\/|"+K+"\\/)?"+q;else J[X]=K;else if(q===void 0)J[X-1]=W+"(?:\\/|"+K+")?";else if(q!==NZ.GLOBSTAR)J[X-1]=W+"(?:\\/|\\/"+K+"\\/)"+q,J[X+1]=NZ.GLOBSTAR}),J.filter((U)=>U!==NZ.GLOBSTAR).join("/")}).join("|"),[V,Q]=Z.length>1?["(?:",")"]:["",""];if(H="^"+V+H+Q+"$",this.negate)H="^(?!"+H+").+$";try{this.regexp=new RegExp(H,[...$].join(""))}catch(Y){this.regexp=!1}return this.regexp}slashSplit(Z){if(this.preserveMultipleSlashes)return Z.split("/");else if(this.isWindows&&/^\/\/[^\/]+/.test(Z))return["",...Z.split(/\/+/)];else return Z.split(/\/+/)}match(Z,z=this.partial){if(this.debug("match",Z,this.pattern),this.comment)return!1;if(this.empty)return Z==="";if(Z==="/"&&z)return!0;let K=this.options;if(this.isWindows)Z=Z.split("\\").join("/");let $=this.slashSplit(Z);this.debug(this.pattern,"split",$);let H=this.set;this.debug(this.pattern,"set",H);let V=$[$.length-1];if(!V)for(let Q=$.length-2;!V&&Q>=0;Q--)V=$[Q];for(let Q=0;Q<H.length;Q++){let Y=H[Q],J=$;if(K.matchBase&&Y.length===1)J=[V];if(this.matchOne(J,Y,z)){if(K.flipNegate)return!0;return!this.negate}}if(K.flipNegate)return!1;return this.negate}static defaults(Z){return NZ.minimatch.defaults(Z).Minimatch}}NZ.Minimatch=qZ;var hK=G0();Object.defineProperty(NZ,"AST",{enumerable:!0,get:function(){return hK.AST}});var _K=w0();Object.defineProperty(NZ,"escape",{enumerable:!0,get:function(){return _K.escape}});var fK=bZ();Object.defineProperty(NZ,"unescape",{enumerable:!0,get:function(){return fK.unescape}});NZ.minimatch.AST=n6.AST;NZ.minimatch.Minimatch=qZ;NZ.minimatch.escape=VK.escape;NZ.minimatch.unescape=QK.unescape});var H7=y((z1,$7)=>{var ZZ=HZ("fs"),M0=HZ("path"),gK=HZ("events").EventEmitter,mK=K7().Minimatch;class DZ extends gK{constructor(Z){Z=Z||{};super(Z);this.isSymbolicLink=Z.isSymbolicLink,this.path=Z.path||process.cwd(),this.basename=M0.basename(this.path),this.ignoreFiles=Z.ignoreFiles||[".ignore"],this.ignoreRules={},this.parent=Z.parent||null,this.includeEmpty=!!Z.includeEmpty,this.root=this.parent?this.parent.root:this.path,this.follow=!!Z.follow,this.result=this.parent?this.parent.result:new Set,this.entries=null,this.sawError=!1,this.exact=Z.exact}sort(Z,z){return Z.localeCompare(z,"en")}emit(Z,z){let K=!1;if(!(this.sawError&&Z==="error")){if(Z==="error")this.sawError=!0;else if(Z==="done"&&!this.parent)z=Array.from(z).map(($)=>/^@/.test($)?`./${$}`:$).sort(this.sort),this.result=z;if(Z==="error"&&this.parent)K=this.parent.emit("error",z);else K=super.emit(Z,z)}return K}start(){return ZZ.readdir(this.path,(Z,z)=>Z?this.emit("error",Z):this.onReaddir(z)),this}isIgnoreFile(Z){return Z!=="."&&Z!==".."&&this.ignoreFiles.indexOf(Z)!==-1}onReaddir(Z){if(this.entries=Z,Z.length===0){if(this.includeEmpty)this.result.add(this.path.slice(this.root.length+1));this.emit("done",this.result)}else if(this.entries.some((K)=>this.isIgnoreFile(K)))this.addIgnoreFiles();else this.filterEntries()}addIgnoreFiles(){let Z=this.entries.filter(($)=>this.isIgnoreFile($)),z=Z.length,K=()=>{if(--z===0)this.filterEntries()};Z.forEach(($)=>this.addIgnoreFile($,K))}addIgnoreFile(Z,z){let K=M0.resolve(this.path,Z);ZZ.readFile(K,"utf8",($,H)=>$?this.emit("error",$):this.onReadIgnoreFile(Z,H,z))}onReadIgnoreFile(Z,z,K){let $={matchBase:!0,dot:!0,flipNegate:!0,nocase:!0},H=z.split(/\r?\n/).filter((V)=>!/^#|^$/.test(V.trim())).map((V)=>{return new mK(V.trim(),$)});this.ignoreRules[Z]=H,K()}filterEntries(){let Z=this.entries.map((K)=>{let $=this.filterEntry(K),H=this.filterEntry(K,!0);return $||H?[K,$,H]:!1}).filter((K)=>K),z=Z.length;if(z===0)this.emit("done",this.result);else{let K=()=>{if(--z===0)this.emit("done",this.result)};Z.forEach(($)=>{let H=$[0],V=$[1],Q=$[2];this.stat({entry:H,file:V,dir:Q},K)})}}onstat({st:Z,entry:z,file:K,dir:$,isSymbolicLink:H},V){let Q=this.path+"/"+z;if(!Z.isDirectory()){if(K)this.result.add(Q.slice(this.root.length+1));V()}else if($)this.walker(z,{isSymbolicLink:H,exact:K||this.filterEntry(z+"/")},V);else V()}stat({entry:Z,file:z,dir:K},$){let H=this.path+"/"+Z;ZZ.lstat(H,(V,Q)=>{if(V)this.emit("error",V);else{let Y=Q.isSymbolicLink();if(this.follow&&Y)ZZ.stat(H,(J,U)=>{if(J)this.emit("error",J);else this.onstat({st:U,entry:Z,file:z,dir:K,isSymbolicLink:Y},$)});else this.onstat({st:Q,entry:Z,file:z,dir:K,isSymbolicLink:Y},$)}})}walkerOpt(Z,z){return{path:this.path+"/"+Z,parent:this,ignoreFiles:this.ignoreFiles,follow:this.follow,includeEmpty:this.includeEmpty,...z}}walker(Z,z,K){new DZ(this.walkerOpt(Z,z)).on("done",K).start()}filterEntry(Z,z,K){let $=!0;if(this.parent&&this.parent.filterEntry){let H=this.basename+"/"+Z,V=K||Z;if($=this.parent.filterEntry(H,z,V),!$&&!this.exact)return!1}return this.ignoreFiles.forEach((H)=>{if(this.ignoreRules[H])this.ignoreRules[H].forEach((V)=>{if(V.negate!==$){let Q=K&&V.globParts.some((J)=>J.length<=(J.slice(-1)[0]?1:2));if(V.match("/"+Z)||V.match(Z)||!!z&&(V.match("/"+Z+"/")||V.match(Z+"/")||V.negate&&(V.match("/"+Z,!0)||V.match(Z,!0))||Q&&(V.match("/"+K+"/")||V.match(K+"/")||V.negate&&(V.match("/"+K,!0)||V.match(K,!0)))))$=V.negate}})}),$}}class fZ extends DZ{start(){return this.onReaddir(ZZ.readdirSync(this.path)),this}addIgnoreFile(Z,z){let K=M0.resolve(this.path,Z);this.onReadIgnoreFile(Z,ZZ.readFileSync(K,"utf8"),z)}stat({entry:Z,file:z,dir:K},$){let H=this.path+"/"+Z,V=ZZ.lstatSync(H),Q=V.isSymbolicLink();if(this.follow&&Q)V=ZZ.statSync(H);this.onstat({st:V,entry:Z,file:z,dir:K,isSymbolicLink:Q},$)}walker(Z,z,K){new fZ(this.walkerOpt(Z,z)).start(),K()}}var dZ=(Z,z)=>{let K=new Promise(($,H)=>{new DZ(Z).on("done",$).on("error",H).start()});return z?K.then(($)=>z(null,$),z):K},uK=(Z)=>new fZ(Z).start().result;$7.exports=dZ;dZ.sync=uK;dZ.Walker=DZ;dZ.WalkerSync=fZ});var Q7=y((K1,V7)=>{var WZ=1000,UZ=WZ*60,BZ=UZ*60,VZ=BZ*24,lK=VZ*7,pK=VZ*365.25;V7.exports=function(Z,z){z=z||{};var K=typeof Z;if(K==="string"&&Z.length>0)return oK(Z);else if(K==="number"&&isFinite(Z))return z.long?iK(Z):nK(Z);throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(Z))};function oK(Z){if(Z=String(Z),Z.length>100)return;var z=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(Z);if(!z)return;var K=parseFloat(z[1]),$=(z[2]||"ms").toLowerCase();switch($){case"years":case"year":case"yrs":case"yr":case"y":return K*pK;case"weeks":case"week":case"w":return K*lK;case"days":case"day":case"d":return K*VZ;case"hours":case"hour":case"hrs":case"hr":case"h":return K*BZ;case"minutes":case"minute":case"mins":case"min":case"m":return K*UZ;case"seconds":case"second":case"secs":case"sec":case"s":return K*WZ;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return K;default:return}}function nK(Z){var z=Math.abs(Z);if(z>=VZ)return Math.round(Z/VZ)+"d";if(z>=BZ)return Math.round(Z/BZ)+"h";if(z>=UZ)return Math.round(Z/UZ)+"m";if(z>=WZ)return Math.round(Z/WZ)+"s";return Z+"ms"}function iK(Z){var z=Math.abs(Z);if(z>=VZ)return cZ(Z,z,VZ,"day");if(z>=BZ)return cZ(Z,z,BZ,"hour");if(z>=UZ)return cZ(Z,z,UZ,"minute");if(z>=WZ)return cZ(Z,z,WZ,"second");return Z+" ms"}function cZ(Z,z,K,$){var H=z>=K*1.5;return Math.round(Z/K)+" "+$+(H?"s":"")}});var N0=y(($1,Y7)=>{function aK(Z){K.debug=K,K.default=K,K.coerce=J,K.disable=Q,K.enable=H,K.enabled=Y,K.humanize=Q7(),K.destroy=U,Object.keys(Z).forEach((X)=>{K[X]=Z[X]}),K.names=[],K.skips=[],K.formatters={};function z(X){let q=0;for(let W=0;W<X.length;W++)q=(q<<5)-q+X.charCodeAt(W),q|=0;return K.colors[Math.abs(q)%K.colors.length]}K.selectColor=z;function K(X){let q,W=null,B,N;function L(...P){if(!L.enabled)return;let h=L,k=Number(new Date),T=k-(q||k);if(h.diff=T,h.prev=q,h.curr=k,q=k,P[0]=K.coerce(P[0]),typeof P[0]!=="string")P.unshift("%O");let S=0;P[0]=P[0].replace(/%([a-zA-Z%])/g,(e,q0)=>{if(e==="%%")return"%";S++;let kZ=K.formatters[q0];if(typeof kZ==="function"){let W0=P[S];e=kZ.call(h,W0),P.splice(S,1),S--}return e}),K.formatArgs.call(h,P),(h.log||K.log).apply(h,P)}if(L.namespace=X,L.useColors=K.useColors(),L.color=K.selectColor(X),L.extend=$,L.destroy=K.destroy,Object.defineProperty(L,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(W!==null)return W;if(B!==K.namespaces)B=K.namespaces,N=K.enabled(X);return N},set:(P)=>{W=P}}),typeof K.init==="function")K.init(L);return L}function $(X,q){let W=K(this.namespace+(typeof q>"u"?":":q)+X);return W.log=this.log,W}function H(X){K.save(X),K.namespaces=X,K.names=[],K.skips=[];let q=(typeof X==="string"?X:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let W of q)if(W[0]==="-")K.skips.push(W.slice(1));else K.names.push(W)}function V(X,q){let W=0,B=0,N=-1,L=0;while(W<X.length)if(B<q.length&&(q[B]===X[W]||q[B]==="*"))if(q[B]==="*")N=B,L=W,B++;else W++,B++;else if(N!==-1)B=N+1,L++,W=L;else return!1;while(B<q.length&&q[B]==="*")B++;return B===q.length}function Q(){let X=[...K.names,...K.skips.map((q)=>"-"+q)].join(",");return K.enable(""),X}function Y(X){for(let q of K.skips)if(V(X,q))return!1;for(let q of K.names)if(V(X,q))return!0;return!1}function J(X){if(X instanceof Error)return X.stack||X.message;return X}function U(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return K.enable(K.load()),K}Y7.exports=aK});var J7=y((X7,gZ)=>{X7.formatArgs=rK;X7.save=tK;X7.load=eK;X7.useColors=sK;X7.storage=Z5();X7.destroy=(()=>{let Z=!1;return()=>{if(!Z)Z=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();X7.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function sK(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let Z;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(Z=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(Z[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function rK(Z){if(Z[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+Z[0]+(this.useColors?"%c ":" ")+"+"+gZ.exports.humanize(this.diff),!this.useColors)return;let z="color: "+this.color;Z.splice(1,0,z,"color: inherit");let K=0,$=0;Z[0].replace(/%[a-zA-Z%]/g,(H)=>{if(H==="%%")return;if(K++,H==="%c")$=K}),Z.splice($,0,z)}X7.log=console.debug||console.log||(()=>{});function tK(Z){try{if(Z)X7.storage.setItem("debug",Z);else X7.storage.removeItem("debug")}catch(z){}}function eK(){let Z;try{Z=X7.storage.getItem("debug")||X7.storage.getItem("DEBUG")}catch(z){}if(!Z&&typeof process<"u"&&"env"in process)Z=process.env.DEBUG;return Z}function Z5(){try{return localStorage}catch(Z){}}gZ.exports=N0()(X7);var{formatters:z5}=gZ.exports;z5.j=function(Z){try{return JSON.stringify(Z)}catch(z){return"[UnexpectedJSONParseError]: "+z.message}}});var B7=y((W7,uZ)=>{var J5=HZ("tty"),mZ=HZ("util");W7.init=F5;W7.log=B5;W7.formatArgs=W5;W7.save=I5;W7.load=j5;W7.useColors=q5;W7.destroy=mZ.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");W7.colors=[6,2,3,4,5,1];try{let Z=(()=>{throw new Error("Cannot require module "+"supports-color");})();if(Z&&(Z.stderr||Z).level>=2)W7.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}catch(Z){}W7.inspectOpts=Object.keys(process.env).filter((Z)=>{return/^debug_/i.test(Z)}).reduce((Z,z)=>{let K=z.substring(6).toLowerCase().replace(/_([a-z])/g,(H,V)=>{return V.toUpperCase()}),$=process.env[z];if(/^(yes|on|true|enabled)$/i.test($))$=!0;else if(/^(no|off|false|disabled)$/i.test($))$=!1;else if($==="null")$=null;else $=Number($);return Z[K]=$,Z},{});function q5(){return"colors"in W7.inspectOpts?Boolean(W7.inspectOpts.colors):J5.isatty(process.stderr.fd)}function W5(Z){let{namespace:z,useColors:K}=this;if(K){let $=this.color,H="\x1B[3"+($<8?$:"8;5;"+$),V=`  ${H};1m${z} \x1B[0m`;Z[0]=V+Z[0].split(`
`).join(`
`+V),Z.push(H+"m+"+uZ.exports.humanize(this.diff)+"\x1B[0m")}else Z[0]=U5()+z+" "+Z[0]}function U5(){if(W7.inspectOpts.hideDate)return"";return new Date().toISOString()+" "}function B5(...Z){return process.stderr.write(mZ.formatWithOptions(W7.inspectOpts,...Z)+`
`)}function I5(Z){if(Z)process.env.DEBUG=Z;else delete process.env.DEBUG}function j5(){return process.env.DEBUG}function F5(Z){Z.inspectOpts={};let z=Object.keys(W7.inspectOpts);for(let K=0;K<z.length;K++)Z.inspectOpts[z[K]]=W7.inspectOpts[z[K]]}uZ.exports=N0()(W7);var{formatters:q7}=uZ.exports;q7.o=function(Z){return this.inspectOpts.colors=this.useColors,mZ.inspect(Z,this.inspectOpts).split(`
`).map((z)=>z.trim()).join(" ")};q7.O=function(Z){return this.inspectOpts.colors=this.useColors,mZ.inspect(Z,this.inspectOpts)}});var v0=y((Q1,D0)=>{if(typeof process>"u"||process.type==="renderer"||!1||process.__nwjs)D0.exports=J7();else D0.exports=B7()});var I7=y((l)=>{var C5=l&&l.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}};Object.defineProperty(l,"__esModule",{value:!0});var P5=HZ("fs"),R5=C5(v0()),IZ=R5.default("@kwsites/file-exists");function A5(Z,z,K){IZ("checking %s",Z);try{let $=P5.statSync(Z);if($.isFile()&&z)return IZ("[OK] path represents a file"),!0;if($.isDirectory()&&K)return IZ("[OK] path represents a directory"),!0;return IZ("[FAIL] path represents something other than a file or directory"),!1}catch($){if($.code==="ENOENT")return IZ("[FAIL] path is not accessible: %o",$),!1;throw IZ("[FATAL] %o",$),$}}function E5(Z,z=l.READABLE){return A5(Z,(z&l.FILE)>0,(z&l.FOLDER)>0)}l.exists=E5;l.FILE=1;l.FOLDER=2;l.READABLE=l.FILE+l.FOLDER});var j7=y((C0)=>{function O5(Z){for(var z in Z)if(!C0.hasOwnProperty(z))C0[z]=Z[z]}Object.defineProperty(C0,"__esModule",{value:!0});O5(I7())});var R0=y((F7)=>{Object.defineProperty(F7,"__esModule",{value:!0});F7.createDeferred=F7.deferred=void 0;function P0(){let Z,z,K="pending";return{promise:new Promise((H,V)=>{Z=H,z=V}),done(H){if(K==="pending")K="resolved",Z(H)},fail(H){if(K==="pending")K="rejected",z(H)},get fulfilled(){return K!=="pending"},get status(){return K}}}F7.deferred=P0;F7.createDeferred=P0;F7.default=P0});var a9=wZ(H7(),1);var z0=wZ(j7(),1),tZ=wZ(v0(),1),v9=wZ(R0(),1),jZ=wZ(R0(),1);import{Buffer as _5}from"node:buffer";import{spawn as w$}from"child_process";import{EventEmitter as bV}from"node:events";var{defineProperty:o0,getOwnPropertyDescriptor:y5,getOwnPropertyNames:n0}=Object,k5=Object.prototype.hasOwnProperty,j=(Z,z)=>function(){return Z&&(z=(0,Z[n0(Z)[0]])(Z=0)),z},b5=(Z,z)=>function(){return z||(0,Z[n0(Z)[0]])((z={exports:{}}).exports,z),z.exports},O=(Z,z)=>{for(var K in z)o0(Z,K,{get:z[K],enumerable:!0})},x5=(Z,z,K,$)=>{if(z&&typeof z==="object"||typeof z==="function"){for(let H of n0(z))if(!k5.call(Z,H)&&H!==K)o0(Z,H,{get:()=>z[H],enumerable:!($=y5(z,H))||$.enumerable})}return Z},R=(Z)=>x5(o0({},"__esModule",{value:!0}),Z);function h5(...Z){let z=new String(Z);return Z0.set(z,Z),z}function aZ(Z){return Z instanceof String&&Z0.has(Z)}function w7(Z){return Z0.get(Z)||[]}var Z0,AZ=j({"src/lib/args/pathspec.ts"(){Z0=new WeakMap}}),t,KZ=j({"src/lib/errors/git-error.ts"(){t=class extends Error{constructor(Z,z){super(z);this.task=Z,Object.setPrototypeOf(this,new.target.prototype)}}}}),EZ,GZ=j({"src/lib/errors/git-response-error.ts"(){KZ(),EZ=class extends t{constructor(Z,z){super(void 0,z||String(Z));this.git=Z}}}}),a7,s7=j({"src/lib/errors/task-configuration-error.ts"(){KZ(),a7=class extends t{constructor(Z){super(void 0,Z)}}}});function r7(Z){if(typeof Z!=="function")return JZ;return Z}function t7(Z){return typeof Z==="function"&&Z!==JZ}function e7(Z,z){let K=Z.indexOf(z);if(K<=0)return[Z,""];return[Z.substr(0,K),Z.substr(K+1)]}function Z8(Z,z=0){return z8(Z)&&Z.length>z?Z[z]:void 0}function XZ(Z,z=0){if(z8(Z)&&Z.length>z)return Z[Z.length-1-z]}function z8(Z){return!!(Z&&typeof Z.length==="number")}function OZ(Z="",z=!0,K=`
`){return Z.split(K).reduce(($,H)=>{let V=z?H.trim():H;if(V)$.push(V);return $},[])}function i0(Z,z){return OZ(Z,!0).map((K)=>z(K))}function a0(Z){return z0.exists(Z,z0.FOLDER)}function D(Z,z){if(Array.isArray(Z)){if(!Z.includes(z))Z.push(z)}else Z.add(z);return z}function K8(Z,z){if(Array.isArray(Z)&&!Z.includes(z))Z.push(z);return Z}function K0(Z,z){if(Array.isArray(Z)){let K=Z.indexOf(z);if(K>=0)Z.splice(K,1)}else Z.delete(z);return z}function a(Z){return Array.isArray(Z)?Z:[Z]}function $8(Z){return Z.replace(/[\s-]+(.)/g,(z,K)=>{return K.toUpperCase()})}function H8(Z){return a(Z).map(String)}function C(Z,z=0){if(Z==null)return z;let K=parseInt(Z,10);return isNaN(K)?z:K}function PZ(Z,z){let K=[];for(let $=0,H=Z.length;$<H;$++)K.push(z,Z[$]);return K}function RZ(Z){return(Array.isArray(Z)?_5.concat(Z):Z).toString("utf-8")}function V8(Z,z){return Object.assign({},...z.map((K)=>(K in Z)?{[K]:Z[K]}:{}))}function k0(Z=0){return new Promise((z)=>setTimeout(z,Z))}function b0(Z){if(Z===!1)return;return Z}var FZ,JZ,SZ,$0=j({"src/lib/utils/util.ts"(){FZ="\x00",JZ=()=>{},SZ=Object.prototype.toString.call.bind(Object.prototype.toString)}});function s(Z,z,K){if(z(Z))return Z;return arguments.length>2?K:void 0}function x0(Z,z){let K=aZ(Z)?"string":typeof Z;return/number|string|boolean/.test(K)&&(!z||!z.includes(K))}function H0(Z){return!!Z&&SZ(Z)==="[object Object]"}function Q8(Z){return typeof Z==="function"}var TZ,x,Y8,sZ,s0,X8=j({"src/lib/utils/argument-filters.ts"(){$0(),AZ(),TZ=(Z)=>{return Array.isArray(Z)},x=(Z)=>{return typeof Z==="string"},Y8=(Z)=>{return Array.isArray(Z)&&Z.every(x)},sZ=(Z)=>{return x(Z)||Array.isArray(Z)&&Z.every(x)},s0=(Z)=>{if(Z==null||"number|boolean|function".includes(typeof Z))return!1;return Array.isArray(Z)||typeof Z==="string"||typeof Z.length==="number"}}}),h0,f5=j({"src/lib/utils/exit-codes.ts"(){h0=((Z)=>{return Z[Z.SUCCESS=0]="SUCCESS",Z[Z.ERROR=1]="ERROR",Z[Z.NOT_FOUND=-2]="NOT_FOUND",Z[Z.UNCLEAN=128]="UNCLEAN",Z})(h0||{})}}),rZ,d5=j({"src/lib/utils/git-output-streams.ts"(){rZ=class Z{constructor(z,K){this.stdOut=z,this.stdErr=K}asStrings(){return new Z(this.stdOut.toString("utf8"),this.stdErr.toString("utf8"))}}}}),M,zZ,c5=j({"src/lib/utils/line-parser.ts"(){M=class{constructor(Z,z){if(this.matches=[],this.parse=(K,$)=>{if(this.resetMatches(),!this._regExp.every((H,V)=>this.addMatch(H,V,K(V))))return!1;return this.useMatches($,this.prepareMatches())!==!1},this._regExp=Array.isArray(Z)?Z:[Z],z)this.useMatches=z}useMatches(Z,z){throw Error("LineParser:useMatches not implemented")}resetMatches(){this.matches.length=0}prepareMatches(){return this.matches}addMatch(Z,z,K){let $=K&&Z.exec(K);if($)this.pushMatch(z,$);return!!$}pushMatch(Z,z){this.matches.push(...z.slice(1))}},zZ=class extends M{addMatch(Z,z,K){return/^remote:\s/.test(String(K))&&super.addMatch(Z,z,K)}pushMatch(Z,z){if(Z>0||z.length>1)super.pushMatch(Z,z)}}}});function J8(...Z){let z=process.cwd(),K=Object.assign({baseDir:z,...q8},...Z.filter(($)=>typeof $==="object"&&$));return K.baseDir=K.baseDir||z,K.trimmed=K.trimmed===!0,K}var q8,g5=j({"src/lib/utils/simple-git-options.ts"(){q8={binary:"git",maxConcurrentProcesses:5,config:[],trimmed:!1}}});function r0(Z,z=[]){if(!H0(Z))return z;return Object.keys(Z).reduce((K,$)=>{let H=Z[$];if(aZ(H))K.push(H);else if(x0(H,["boolean"]))K.push($+"="+H);else if(Array.isArray(H)){for(let V of H)if(!x0(V,["string","number"]))K.push($+"="+V)}else K.push($);return K},z)}function c(Z,z=0,K=!1){let $=[];for(let H=0,V=z<0?Z.length:z;H<V;H++)if("string|number".includes(typeof Z[H]))$.push(String(Z[H]));if(r0(t0(Z),$),!K)$.push(...m5(Z));return $}function m5(Z){let z=typeof XZ(Z)==="function";return s(XZ(Z,z?1:0),TZ,[])}function t0(Z){let z=Q8(XZ(Z));return s(XZ(Z,z?1:0),H0)}function A(Z,z=!0){let K=r7(XZ(Z));return z||t7(K)?K:void 0}var u5=j({"src/lib/utils/task-options.ts"(){X8(),$0(),AZ()}});function _0(Z,z){return Z(z.stdOut,z.stdErr)}function m(Z,z,K,$=!0){return a(K).forEach((H)=>{for(let V=OZ(H,$),Q=0,Y=V.length;Q<Y;Q++){let J=(U=0)=>{if(Q+U>=Y)return;return V[Q+U]};z.some(({parse:U})=>U(J,Z))}}),Z}var l5=j({"src/lib/utils/task-parser.ts"(){$0()}}),W8={};O(W8,{ExitCodes:()=>h0,GitOutputStreams:()=>rZ,LineParser:()=>M,NOOP:()=>JZ,NULL:()=>FZ,RemoteLineParser:()=>zZ,append:()=>D,appendTaskOptions:()=>r0,asArray:()=>a,asCamelCase:()=>$8,asFunction:()=>r7,asNumber:()=>C,asStringArray:()=>H8,bufferToString:()=>RZ,callTaskParser:()=>_0,createInstanceConfig:()=>J8,delay:()=>k0,filterArray:()=>TZ,filterFunction:()=>Q8,filterHasLength:()=>s0,filterPlainObject:()=>H0,filterPrimitives:()=>x0,filterString:()=>x,filterStringArray:()=>Y8,filterStringOrStringArray:()=>sZ,filterType:()=>s,first:()=>Z8,folderExists:()=>a0,forEachLineWithContent:()=>i0,getTrailingOptions:()=>c,including:()=>K8,isUserFunction:()=>t7,last:()=>XZ,objectToString:()=>SZ,orVoid:()=>b0,parseStringResponse:()=>m,pick:()=>V8,prefixedArray:()=>PZ,remove:()=>K0,splitOn:()=>e7,toLinesWithContent:()=>OZ,trailingFunctionArgument:()=>A,trailingOptionsArgument:()=>t0});var w=j({"src/lib/utils/index.ts"(){X8(),f5(),d5(),c5(),g5(),u5(),l5(),$0()}}),U8={};O(U8,{CheckRepoActions:()=>f0,checkIsBareRepoTask:()=>I8,checkIsRepoRootTask:()=>B8,checkIsRepoTask:()=>p5});function p5(Z){switch(Z){case"bare":return I8();case"root":return B8()}return{commands:["rev-parse","--is-inside-work-tree"],format:"utf-8",onError:V0,parser:e0}}function B8(){return{commands:["rev-parse","--git-dir"],format:"utf-8",onError:V0,parser(z){return/^\.(git)?$/.test(z.trim())}}}function I8(){return{commands:["rev-parse","--is-bare-repository"],format:"utf-8",onError:V0,parser:e0}}function o5(Z){return/(Not a git repository|Kein Git-Repository)/i.test(String(Z))}var f0,V0,e0,j8=j({"src/lib/tasks/check-is-repo.ts"(){w(),f0=((Z)=>{return Z.BARE="bare",Z.IN_TREE="tree",Z.IS_REPO_ROOT="root",Z})(f0||{}),V0=({exitCode:Z},z,K,$)=>{if(Z===128&&o5(z))return K(Buffer.from("false"));$(z)},e0=(Z)=>{return Z.trim()==="true"}}});function n5(Z,z){let K=new F8(Z),$=Z?w8:G8;return OZ(z).forEach((H)=>{let V=H.replace($,"");K.paths.push(V),(L8.test(V)?K.folders:K.files).push(V)}),K}var F8,G8,w8,L8,i5=j({"src/lib/responses/CleanSummary.ts"(){w(),F8=class{constructor(Z){this.dryRun=Z,this.paths=[],this.files=[],this.folders=[]}},G8=/^[a-z]+\s*/i,w8=/^[a-z]+\s+[a-z]+\s*/i,L8=/\/$/}}),d0={};O(d0,{EMPTY_COMMANDS:()=>Q0,adhocExecTask:()=>M8,configurationErrorTask:()=>g,isBufferTask:()=>D8,isEmptyTask:()=>v8,straightThroughBufferTask:()=>N8,straightThroughStringTask:()=>f});function M8(Z){return{commands:Q0,format:"empty",parser:Z}}function g(Z){return{commands:Q0,format:"empty",parser(){throw typeof Z==="string"?new a7(Z):Z}}}function f(Z,z=!1){return{commands:Z,format:"utf-8",parser(K){return z?String(K).trim():K}}}function N8(Z){return{commands:Z,format:"buffer",parser(z){return z}}}function D8(Z){return Z.format==="buffer"}function v8(Z){return Z.format==="empty"||!Z.commands.length}var Q0,E=j({"src/lib/tasks/task.ts"(){s7(),Q0=[]}}),C8={};O(C8,{CONFIG_ERROR_INTERACTIVE_MODE:()=>Z6,CONFIG_ERROR_MODE_REQUIRED:()=>z6,CONFIG_ERROR_UNKNOWN_OPTION:()=>K6,CleanOptions:()=>pZ,cleanTask:()=>P8,cleanWithOptionsTask:()=>a5,isCleanOptionsArray:()=>s5});function a5(Z,z){let{cleanMode:K,options:$,valid:H}=r5(Z);if(!K)return g(z6);if(!H.options)return g(K6+JSON.stringify(Z));if($.push(...z),$.some(Z$))return g(Z6);return P8(K,$)}function P8(Z,z){return{commands:["clean",`-${Z}`,...z],format:"utf-8",parser($){return n5(Z==="n",$)}}}function s5(Z){return Array.isArray(Z)&&Z.every((z)=>$6.has(z))}function r5(Z){let z,K=[],$={cleanMode:!1,options:!0};return Z.replace(/[^a-z]i/g,"").split("").forEach((H)=>{if(t5(H))z=H,$.cleanMode=!0;else $.options=$.options&&e5(K[K.length]=`-${H}`)}),{cleanMode:z,options:K,valid:$}}function t5(Z){return Z==="f"||Z==="n"}function e5(Z){return/^-[a-z]$/i.test(Z)&&$6.has(Z.charAt(1))}function Z$(Z){if(/^-[^\-]/.test(Z))return Z.indexOf("i")>0;return Z==="--interactive"}var Z6,z6,K6,pZ,$6,R8=j({"src/lib/tasks/clean.ts"(){i5(),w(),E(),Z6="Git clean interactive mode is not supported",z6='Git clean mode parameter ("n" or "f") is required',K6="Git clean unknown option found in: ",pZ=((Z)=>{return Z.DRY_RUN="n",Z.FORCE="f",Z.IGNORED_INCLUDED="x",Z.IGNORED_ONLY="X",Z.EXCLUDING="e",Z.QUIET="q",Z.RECURSIVE="d",Z})(pZ||{}),$6=new Set(["i",...H8(Object.values(pZ))])}});function z$(Z){let z=new E8;for(let K of A8(Z))z.addValue(K.file,String(K.key),K.value);return z}function K$(Z,z){let K=null,$=[],H=new Map;for(let V of A8(Z,z)){if(V.key!==z)continue;if($.push(K=V.value),!H.has(V.file))H.set(V.file,[]);H.get(V.file).push(K)}return{key:z,paths:Array.from(H.keys()),scopes:H,value:K,values:$}}function $$(Z){return Z.replace(/^(file):/,"")}function*A8(Z,z=null){let K=Z.split("\x00");for(let $=0,H=K.length-1;$<H;){let V=$$(K[$++]),Q=K[$++],Y=z;if(Q.includes(`
`)){let J=e7(Q,`
`);Y=J[0],Q=J[1]}yield{file:V,key:Y,value:Q}}}var E8,H$=j({"src/lib/responses/ConfigList.ts"(){w(),E8=class{constructor(){this.files=[],this.values=Object.create(null)}get all(){if(!this._all)this._all=this.files.reduce((Z,z)=>{return Object.assign(Z,this.values[z])},{});return this._all}addFile(Z){if(!(Z in this.values)){let z=XZ(this.files);this.values[Z]=z?Object.create(this.values[z]):{},this.files.push(Z)}return this.values[Z]}addValue(Z,z,K){let $=this.addFile(Z);if(!$.hasOwnProperty(z))$[z]=K;else if(Array.isArray($[z]))$[z].push(K);else $[z]=[$[z],K];this._all=void 0}}}});function A0(Z,z){if(typeof Z==="string"&&c0.hasOwnProperty(Z))return Z;return z}function V$(Z,z,K,$){let H=["config",`--${$}`];if(K)H.push("--add");return H.push(Z,z),{commands:H,format:"utf-8",parser(V){return V}}}function Q$(Z,z){let K=["config","--null","--show-origin","--get-all",Z];if(z)K.splice(1,0,`--${z}`);return{commands:K,format:"utf-8",parser($){return K$($,Z)}}}function Y$(Z){let z=["config","--list","--show-origin","--null"];if(Z)z.push(`--${Z}`);return{commands:z,format:"utf-8",parser(K){return z$(K)}}}function X$(){return{addConfig(Z,z,...K){return this._runTask(V$(Z,z,K[0]===!0,A0(K[1],"local")),A(arguments))},getConfig(Z,z){return this._runTask(Q$(Z,A0(z,void 0)),A(arguments))},listConfig(...Z){return this._runTask(Y$(A0(Z[0],void 0)),A(arguments))}}}var c0,O8=j({"src/lib/tasks/config.ts"(){H$(),w(),c0=((Z)=>{return Z.system="system",Z.global="global",Z.local="local",Z.worktree="worktree",Z})(c0||{})}});function J$(Z){return S8.has(Z)}var E0,S8,T8=j({"src/lib/tasks/diff-name-status.ts"(){E0=((Z)=>{return Z.ADDED="A",Z.COPIED="C",Z.DELETED="D",Z.MODIFIED="M",Z.RENAMED="R",Z.CHANGED="T",Z.UNMERGED="U",Z.UNKNOWN="X",Z.BROKEN="B",Z})(E0||{}),S8=new Set(Object.values(E0))}});function q$(...Z){return new k8().param(...Z)}function W$(Z){let z=new Set,K={};return i0(Z,($)=>{let[H,V,Q]=$.split(FZ);z.add(H),(K[H]=K[H]||[]).push({line:C(V),path:H,preview:Q})}),{paths:z,results:K}}function U$(){return{grep(Z){let z=A(arguments),K=c(arguments);for(let H of y8)if(K.includes(H))return this._runTask(g(`git.grep: use of "${H}" is not supported.`),z);if(typeof Z==="string")Z=q$().param(Z);let $=["grep","--null","-n","--full-name",...K,...Z];return this._runTask({commands:$,format:"utf-8",parser(H){return W$(H)}},z)}}}var y8,CZ,L7,k8,b8=j({"src/lib/tasks/grep.ts"(){w(),E(),y8=["-h"],CZ=Symbol("grepQuery"),k8=class{constructor(){this[L7]=[]}*[(L7=CZ,Symbol.iterator)](){for(let Z of this[CZ])yield Z}and(...Z){return Z.length&&this[CZ].push("--and","(",...PZ(Z,"-e"),")"),this}param(...Z){return this[CZ].push(...PZ(Z,"-e")),this}}}}),x8={};O(x8,{ResetMode:()=>oZ,getResetMode:()=>I$,resetTask:()=>B$});function B$(Z,z){let K=["reset"];if(h8(Z))K.push(`--${Z}`);return K.push(...z),f(K)}function I$(Z){if(h8(Z))return Z;switch(typeof Z){case"string":case"undefined":return"soft"}return}function h8(Z){return _8.includes(Z)}var oZ,_8,f8=j({"src/lib/tasks/reset.ts"(){E(),oZ=((Z)=>{return Z.MIXED="mixed",Z.SOFT="soft",Z.HARD="hard",Z.MERGE="merge",Z.KEEP="keep",Z})(oZ||{}),_8=Array.from(Object.values(oZ))}});function j$(){return tZ.default("simple-git")}function M7(Z,z,K){if(!z||!String(z).replace(/\s*/,""))return!K?Z:($,...H)=>{Z($,...H),K($,...H)};return($,...H)=>{if(Z(`%s ${$}`,z,...H),K)K($,...H)}}function F$(Z,z,{namespace:K}){if(typeof Z==="string")return Z;let $=z&&z.namespace||"";if($.startsWith(K))return $.substr(K.length+1);return $||K}function H6(Z,z,K,$=j$()){let H=Z&&`[${Z}]`||"",V=[],Q=typeof z==="string"?$.extend(z):z,Y=F$(s(z,x),Q,$);return U(K);function J(X,q){return D(V,H6(Z,Y.replace(/^[^:]+/,X),q,$))}function U(X){let q=X&&`[${X}]`||"",W=Q&&M7(Q,q)||JZ,B=M7($,`${H} ${q}`,W);return Object.assign(Q?W:B,{label:Z,sibling:J,info:B,step:U})}}var d8=j({"src/lib/git-logger.ts"(){w(),tZ.default.formatters.L=(Z)=>String(s0(Z)?Z.length:"-"),tZ.default.formatters.B=(Z)=>{if(Buffer.isBuffer(Z))return Z.toString("utf8");return SZ(Z)}}}),c8,G$=j({"src/lib/runners/tasks-pending-queue.ts"(){KZ(),d8(),c8=class Z{constructor(z="GitExecutor"){this.logLabel=z,this._queue=new Map}withProgress(z){return this._queue.get(z)}createProgress(z){let K=Z.getName(z.commands[0]),$=H6(this.logLabel,K);return{task:z,logger:$,name:K}}push(z){let K=this.createProgress(z);return K.logger("Adding task to the queue, commands = %o",z.commands),this._queue.set(z,K),K}fatal(z){for(let[K,{logger:$}]of Array.from(this._queue.entries())){if(K===z.task)$.info("Failed %o",z),$("Fatal exception, any as-yet un-started tasks run through this executor will not be attempted");else $.info("A fatal exception occurred in a previous task, the queue has been purged: %o",z.message);this.complete(K)}if(this._queue.size!==0)throw Error(`Queue size should be zero after fatal: ${this._queue.size}`)}complete(z){if(this.withProgress(z))this._queue.delete(z)}attempt(z){let K=this.withProgress(z);if(!K)throw new t(void 0,"TasksPendingQueue: attempt called for an unknown task");return K.logger("Starting task"),K}static getName(z="empty"){return`task:${z}:${++Z.counter}`}static{this.counter=0}}}});function YZ(Z,z){return{method:Z8(Z.commands)||"",commands:z}}function L$(Z,z){return(K)=>{z("[ERROR] child process exception %o",K),Z.push(Buffer.from(String(K.stack),"ascii"))}}function N7(Z,z,K,$){return(H)=>{K("%s received %L bytes",z,H),$("%B",H),Z.push(H)}}var g0,M$=j({"src/lib/runners/git-executor-chain.ts"(){KZ(),E(),w(),G$(),g0=class{constructor(Z,z,K){this._executor=Z,this._scheduler=z,this._plugins=K,this._chain=Promise.resolve(),this._queue=new c8}get cwd(){return this._cwd||this._executor.cwd}set cwd(Z){this._cwd=Z}get env(){return this._executor.env}get outputHandler(){return this._executor.outputHandler}chain(){return this}push(Z){return this._queue.push(Z),this._chain=this._chain.then(()=>this.attemptTask(Z))}async attemptTask(Z){let z=await this._scheduler.next(),K=()=>this._queue.complete(Z);try{let{logger:$}=this._queue.attempt(Z);return await(v8(Z)?this.attemptEmptyTask(Z,$):this.attemptRemoteTask(Z,$))}catch($){throw this.onFatalException(Z,$)}finally{K(),z()}}onFatalException(Z,z){let K=z instanceof t?Object.assign(z,{task:Z}):new t(Z,z&&String(z));return this._chain=Promise.resolve(),this._queue.fatal(K),K}async attemptRemoteTask(Z,z){let K=this._plugins.exec("spawn.binary","",YZ(Z,Z.commands)),$=this._plugins.exec("spawn.args",[...Z.commands],YZ(Z,Z.commands)),H=await this.gitResponse(Z,K,$,this.outputHandler,z.step("SPAWN")),V=await this.handleTaskData(Z,$,H,z.step("HANDLE"));if(z("passing response to task's parser as a %s",Z.format),D8(Z))return _0(Z.parser,V);return _0(Z.parser,V.asStrings())}async attemptEmptyTask(Z,z){return z("empty task bypassing child process to call to task's parser"),Z.parser(this)}handleTaskData(Z,z,K,$){let{exitCode:H,rejection:V,stdOut:Q,stdErr:Y}=K;return new Promise((J,U)=>{$("Preparing to handle process response exitCode=%d stdOut=",H);let{error:X}=this._plugins.exec("task.error",{error:V},{...YZ(Z,z),...K});if(X&&Z.onError)return $.info("exitCode=%s handling with custom error handler"),Z.onError(K,X,(q)=>{$.info("custom error handler treated as success"),$("custom error returned a %s",SZ(q)),J(new rZ(Array.isArray(q)?Buffer.concat(q):q,Buffer.concat(Y)))},U);if(X)return $.info("handling as error: exitCode=%s stdErr=%s rejection=%o",H,Y.length,V),U(X);$.info("retrieving task output complete"),J(new rZ(Buffer.concat(Q),Buffer.concat(Y)))})}async gitResponse(Z,z,K,$,H){let V=H.sibling("output"),Q=this._plugins.exec("spawn.options",{cwd:this.cwd,env:this.env,windowsHide:!0},YZ(Z,Z.commands));return new Promise((Y)=>{let J=[],U=[];H.info("%s %o",z,K),H("%O",Q);let X=this._beforeSpawn(Z,K);if(X)return Y({stdOut:J,stdErr:U,exitCode:9901,rejection:X});this._plugins.exec("spawn.before",void 0,{...YZ(Z,K),kill(W){X=W||X}});let q=w$(z,K,Q);if(q.stdout.on("data",N7(J,"stdOut",H,V.step("stdOut"))),q.stderr.on("data",N7(U,"stdErr",H,V.step("stdErr"))),q.on("error",L$(U,H)),$)H("Passing child process stdOut/stdErr to custom outputHandler"),$(z,q.stdout,q.stderr,[...K]);this._plugins.exec("spawn.after",void 0,{...YZ(Z,K),spawned:q,close(W,B){Y({stdOut:J,stdErr:U,exitCode:W,rejection:X||B})},kill(W){if(q.killed)return;X=W,q.kill("SIGINT")}})})}_beforeSpawn(Z,z){let K;return this._plugins.exec("spawn.before",void 0,{...YZ(Z,z),kill($){K=$||K}}),K}}}}),g8={};O(g8,{GitExecutor:()=>m8});var m8,N$=j({"src/lib/runners/git-executor.ts"(){M$(),m8=class{constructor(Z,z,K){this.cwd=Z,this._scheduler=z,this._plugins=K,this._chain=new g0(this,this._scheduler,this._plugins)}chain(){return new g0(this,this._scheduler,this._plugins)}push(Z){return this._chain.push(Z)}}}});function D$(Z,z,K=JZ){let $=(V)=>{K(null,V)},H=(V)=>{if(V?.task===Z)K(V instanceof EZ?v$(V):V,void 0)};z.then($,H)}function v$(Z){let z=($)=>{console.warn(`simple-git deprecation notice: accessing GitResponseError.${$} should be GitResponseError.git.${$}, this will no longer be available in version 3`),z=JZ};return Object.create(Z,Object.getOwnPropertyNames(Z.git).reduce(K,{}));function K($,H){if(H in Z)return $;return $[H]={enumerable:!1,configurable:!1,get(){return z(H),Z.git[H]}},$}}var C$=j({"src/lib/task-callback.ts"(){GZ(),w()}});function D7(Z,z){return M8((K)=>{if(!a0(Z))throw Error(`Git.cwd: cannot change to non-directory "${Z}"`);return(z||K).cwd=Z})}var P$=j({"src/lib/tasks/change-working-directory.ts"(){w(),E()}});function O0(Z){let z=["checkout",...Z];if(z[1]==="-b"&&z.includes("-B"))z[1]=K0(z,"-B");return f(z)}function R$(){return{checkout(){return this._runTask(O0(c(arguments,1)),A(arguments))},checkoutBranch(Z,z){return this._runTask(O0(["-b",Z,z,...c(arguments)]),A(arguments))},checkoutLocalBranch(Z){return this._runTask(O0(["-b",Z,...c(arguments)]),A(arguments))}}}var A$=j({"src/lib/tasks/checkout.ts"(){w(),E()}});function E$(){return{count:0,garbage:0,inPack:0,packs:0,prunePackable:0,size:0,sizeGarbage:0,sizePack:0}}function O$(){return{countObjects(){return this._runTask({commands:["count-objects","--verbose"],format:"utf-8",parser(Z){return m(E$(),[u8],Z)}})}}}var u8,S$=j({"src/lib/tasks/count-objects.ts"(){w(),u8=new M(/([a-z-]+): (\d+)$/,(Z,[z,K])=>{let $=$8(z);if(Z.hasOwnProperty($))Z[$]=C(K)})}});function T$(Z){return m({author:null,branch:"",commit:"",root:!1,summary:{changes:0,insertions:0,deletions:0}},l8,Z)}var l8,y$=j({"src/lib/parsers/parse-commit.ts"(){w(),l8=[new M(/^\[([^\s]+)( \([^)]+\))? ([^\]]+)/,(Z,[z,K,$])=>{Z.branch=z,Z.commit=$,Z.root=!!K}),new M(/\s*Author:\s(.+)/i,(Z,[z])=>{let K=z.split("<"),$=K.pop();if(!$||!$.includes("@"))return;Z.author={email:$.substr(0,$.length-1),name:K.join("<").trim()}}),new M(/(\d+)[^,]*(?:,\s*(\d+)[^,]*)(?:,\s*(\d+))/g,(Z,[z,K,$])=>{Z.summary.changes=parseInt(z,10)||0,Z.summary.insertions=parseInt(K,10)||0,Z.summary.deletions=parseInt($,10)||0}),new M(/^(\d+)[^,]*(?:,\s*(\d+)[^(]+\(([+-]))?/,(Z,[z,K,$])=>{Z.summary.changes=parseInt(z,10)||0;let H=parseInt(K,10)||0;if($==="-")Z.summary.deletions=H;else if($==="+")Z.summary.insertions=H})]}});function k$(Z,z,K){return{commands:["-c","core.abbrev=40","commit",...PZ(Z,"-m"),...z,...K],format:"utf-8",parser:T$}}function b$(){return{commit(z,...K){let $=A(arguments),H=Z(z)||k$(a(z),a(s(K[0],sZ,[])),[...s(K[1],TZ,[]),...c(arguments,0,!0)]);return this._runTask(H,$)}};function Z(z){return!sZ(z)&&g("git.commit: requires the commit message to be supplied as a string/string[]")}}var x$=j({"src/lib/tasks/commit.ts"(){y$(),w(),E()}});function h$(){return{firstCommit(){return this._runTask(f(["rev-list","--max-parents=0","HEAD"],!0),A(arguments))}}}var _$=j({"src/lib/tasks/first-commit.ts"(){w(),E()}});function f$(Z,z){let K=["hash-object",Z];if(z)K.push("-w");return f(K,!0)}var d$=j({"src/lib/tasks/hash-object.ts"(){E()}});function c$(Z,z,K){let $=String(K).trim(),H;if(H=p8.exec($))return new nZ(Z,z,!1,H[1]);if(H=o8.exec($))return new nZ(Z,z,!0,H[1]);let V="",Q=$.split(" ");while(Q.length)if(Q.shift()==="in"){V=Q.join(" ");break}return new nZ(Z,z,/^re/i.test($),V)}var nZ,p8,o8,g$=j({"src/lib/responses/InitSummary.ts"(){nZ=class{constructor(Z,z,K,$){this.bare=Z,this.path=z,this.existing=K,this.gitDir=$}},p8=/^Init.+ repository in (.+)$/,o8=/^Rein.+ in (.+)$/}});function m$(Z){return Z.includes(V6)}function u$(Z=!1,z,K){let $=["init",...K];if(Z&&!m$($))$.splice(1,0,V6);return{commands:$,format:"utf-8",parser(H){return c$($.includes("--bare"),z,H)}}}var V6,l$=j({"src/lib/tasks/init.ts"(){g$(),V6="--bare"}});function Q6(Z){for(let z=0;z<Z.length;z++){let K=Y6.exec(Z[z]);if(K)return`--${K[1]}`}return""}function p$(Z){return Y6.test(Z)}var Y6,yZ=j({"src/lib/args/log-format.ts"(){Y6=/^--(stat|numstat|name-only|name-status)(=|$)/}}),n8,o$=j({"src/lib/responses/DiffSummary.ts"(){n8=class{constructor(){this.changed=0,this.deletions=0,this.insertions=0,this.files=[]}}}});function i8(Z=""){let z=a8[Z];return(K)=>m(new n8,z,K,!1)}var S0,v7,C7,P7,a8,s8=j({"src/lib/parsers/parse-diff-summary.ts"(){yZ(),o$(),T8(),w(),S0=[new M(/^(.+)\s+\|\s+(\d+)(\s+[+\-]+)?$/,(Z,[z,K,$=""])=>{Z.files.push({file:z.trim(),changes:C(K),insertions:$.replace(/[^+]/g,"").length,deletions:$.replace(/[^-]/g,"").length,binary:!1})}),new M(/^(.+) \|\s+Bin ([0-9.]+) -> ([0-9.]+) ([a-z]+)/,(Z,[z,K,$])=>{Z.files.push({file:z.trim(),before:C(K),after:C($),binary:!0})}),new M(/(\d+) files? changed\s*((?:, \d+ [^,]+){0,2})/,(Z,[z,K])=>{let $=/(\d+) i/.exec(K),H=/(\d+) d/.exec(K);Z.changed=C(z),Z.insertions=C($?.[1]),Z.deletions=C(H?.[1])})],v7=[new M(/(\d+)\t(\d+)\t(.+)$/,(Z,[z,K,$])=>{let H=C(z),V=C(K);Z.changed++,Z.insertions+=H,Z.deletions+=V,Z.files.push({file:$,changes:H+V,insertions:H,deletions:V,binary:!1})}),new M(/-\t-\t(.+)$/,(Z,[z])=>{Z.changed++,Z.files.push({file:z,after:0,before:0,binary:!0})})],C7=[new M(/(.+)$/,(Z,[z])=>{Z.changed++,Z.files.push({file:z,changes:0,insertions:0,deletions:0,binary:!1})})],P7=[new M(/([ACDMRTUXB])([0-9]{0,3})\t(.[^\t]*)(\t(.[^\t]*))?$/,(Z,[z,K,$,H,V])=>{Z.changed++,Z.files.push({file:V??$,changes:0,insertions:0,deletions:0,binary:!1,status:b0(J$(z)&&z),from:b0(!!V&&$!==V&&$),similarity:C(K)})})],a8={[""]:S0,["--stat"]:S0,["--numstat"]:v7,["--name-status"]:P7,["--name-only"]:C7}}});function n$(Z,z){return z.reduce((K,$,H)=>{return K[$]=Z[H]||"",K},Object.create({diff:null}))}function r8(Z=q6,z=t8,K=""){let $=i8(K);return function(H){let V=OZ(H.trim(),!1,X6).map(function(Q){let Y=Q.split(J6),J=n$(Y[0].split(Z),z);if(Y.length>1&&!!Y[1].trim())J.diff=$(Y[1]);return J});return{all:V,latest:V.length&&V[0]||null,total:V.length}}}var X6,J6,q6,t8,e8=j({"src/lib/parsers/parse-list-log-summary.ts"(){w(),s8(),yZ(),X6="òòòòòò ",J6=" òò",q6=" ò ",t8=["hash","date","message","refs","author_name","author_email"]}}),Z9={};O(Z9,{diffSummaryTask:()=>i$,validateLogFormatConfig:()=>Y0});function i$(Z){let z=Q6(Z),K=["diff"];if(z==="")z="--stat",K.push("--stat=4096");return K.push(...Z),Y0(K)||{commands:K,format:"utf-8",parser:i8(z)}}function Y0(Z){let z=Z.filter(p$);if(z.length>1)return g(`Summary flags are mutually exclusive - pick one of ${z.join(",")}`);if(z.length&&Z.includes("-z"))return g(`Summary flag ${z} parsing is not compatible with null termination option '-z'`)}var W6=j({"src/lib/tasks/diff.ts"(){yZ(),s8(),E()}});function a$(Z,z){let K=[],$=[];return Object.keys(Z).forEach((H)=>{K.push(H),$.push(String(Z[H]))}),[K,$.join(z)]}function s$(Z){return Object.keys(Z).reduce((z,K)=>{if(!(K in m0))z[K]=Z[K];return z},{})}function z9(Z={},z=[]){let K=s(Z.splitter,x,q6),$=H0(Z.format)?Z.format:{hash:"%H",date:Z.strictDate===!1?"%ai":"%aI",message:"%s",refs:"%D",body:Z.multiLine?"%B":"%b",author_name:Z.mailMap!==!1?"%aN":"%an",author_email:Z.mailMap!==!1?"%aE":"%ae"},[H,V]=a$($,K),Q=[],Y=[`--pretty=format:${X6}${V}${J6}`,...z],J=Z.n||Z["max-count"]||Z.maxCount;if(J)Y.push(`--max-count=${J}`);if(Z.from||Z.to){let U=Z.symmetric!==!1?"...":"..";Q.push(`${Z.from||""}${U}${Z.to||""}`)}if(x(Z.file))Y.push("--follow",h5(Z.file));return r0(s$(Z),Y),{fields:H,splitter:K,commands:[...Y,...Q]}}function r$(Z,z,K){let $=r8(Z,z,Q6(K));return{commands:["log",...K],format:"utf-8",parser:$}}function t$(){return{log(...K){let $=A(arguments),H=z9(t0(arguments),s(arguments[0],TZ)),V=z(...K)||Y0(H.commands)||Z(H);return this._runTask(V,$)}};function Z(K){return r$(K.splitter,K.fields,K.commands)}function z(K,$){return x(K)&&x($)&&g("git.log(string, string) should be replaced with git.log({ from: string, to: string })")}}var m0,K9=j({"src/lib/tasks/log.ts"(){yZ(),AZ(),e8(),w(),E(),W6(),m0=((Z)=>{return Z[Z["--pretty"]=0]="--pretty",Z[Z["max-count"]=1]="max-count",Z[Z.maxCount=2]="maxCount",Z[Z.n=3]="n",Z[Z.file=4]="file",Z[Z.format=5]="format",Z[Z.from=6]="from",Z[Z.to=7]="to",Z[Z.splitter=8]="splitter",Z[Z.symmetric=9]="symmetric",Z[Z.mailMap=10]="mailMap",Z[Z.multiLine=11]="multiLine",Z[Z.strictDate=12]="strictDate",Z})(m0||{})}}),iZ,$9,e$=j({"src/lib/responses/MergeSummary.ts"(){iZ=class{constructor(Z,z=null,K){this.reason=Z,this.file=z,this.meta=K}toString(){return`${this.file}:${this.reason}`}},$9=class{constructor(){this.conflicts=[],this.merges=[],this.result="success"}get failed(){return this.conflicts.length>0}get reason(){return this.result}toString(){if(this.conflicts.length)return`CONFLICTS: ${this.conflicts.join(", ")}`;return"OK"}}}}),u0,H9,ZH=j({"src/lib/responses/PullSummary.ts"(){u0=class{constructor(){this.remoteMessages={all:[]},this.created=[],this.deleted=[],this.files=[],this.deletions={},this.insertions={},this.summary={changes:0,deletions:0,insertions:0}}},H9=class{constructor(){this.remote="",this.hash={local:"",remote:""},this.branch={local:"",remote:""},this.message=""}toString(){return this.message}}}});function T0(Z){return Z.objects=Z.objects||{compressing:0,counting:0,enumerating:0,packReused:0,reused:{count:0,delta:0},total:{count:0,delta:0}}}function R7(Z){let z=/^\s*(\d+)/.exec(Z),K=/delta (\d+)/i.exec(Z);return{count:C(z&&z[1]||"0"),delta:C(K&&K[1]||"0")}}var V9,zH=j({"src/lib/parsers/parse-remote-objects.ts"(){w(),V9=[new zZ(/^remote:\s*(enumerating|counting|compressing) objects: (\d+),/i,(Z,[z,K])=>{let $=z.toLowerCase(),H=T0(Z.remoteMessages);Object.assign(H,{[$]:C(K)})}),new zZ(/^remote:\s*(enumerating|counting|compressing) objects: \d+% \(\d+\/(\d+)\),/i,(Z,[z,K])=>{let $=z.toLowerCase(),H=T0(Z.remoteMessages);Object.assign(H,{[$]:C(K)})}),new zZ(/total ([^,]+), reused ([^,]+), pack-reused (\d+)/i,(Z,[z,K,$])=>{let H=T0(Z.remoteMessages);H.total=R7(z),H.reused=R7(K),H.packReused=C($)})]}});function Q9(Z,z){return m({remoteMessages:new X9},Y9,z)}var Y9,X9,J9=j({"src/lib/parsers/parse-remote-messages.ts"(){w(),zH(),Y9=[new zZ(/^remote:\s*(.+)$/,(Z,[z])=>{return Z.remoteMessages.all.push(z.trim()),!1}),...V9,new zZ([/create a (?:pull|merge) request/i,/\s(https?:\/\/\S+)$/],(Z,[z])=>{Z.remoteMessages.pullRequestUrl=z}),new zZ([/found (\d+) vulnerabilities.+\(([^)]+)\)/i,/\s(https?:\/\/\S+)$/],(Z,[z,K,$])=>{Z.remoteMessages.vulnerabilities={count:C(z),summary:K,url:$}})],X9=class{constructor(){this.all=[]}}}});function KH(Z,z){let K=m(new H9,q9,[Z,z]);return K.message&&K}var A7,E7,O7,S7,q9,T7,U6,W9=j({"src/lib/parsers/parse-pull.ts"(){ZH(),w(),J9(),A7=/^\s*(.+?)\s+\|\s+\d+\s*(\+*)(-*)/,E7=/(\d+)\D+((\d+)\D+\(\+\))?(\D+(\d+)\D+\(-\))?/,O7=/^(create|delete) mode \d+ (.+)/,S7=[new M(A7,(Z,[z,K,$])=>{if(Z.files.push(z),K)Z.insertions[z]=K.length;if($)Z.deletions[z]=$.length}),new M(E7,(Z,[z,,K,,$])=>{if(K!==void 0||$!==void 0)return Z.summary.changes=+z||0,Z.summary.insertions=+K||0,Z.summary.deletions=+$||0,!0;return!1}),new M(O7,(Z,[z,K])=>{D(Z.files,K),D(z==="create"?Z.created:Z.deleted,K)})],q9=[new M(/^from\s(.+)$/i,(Z,[z])=>void(Z.remote=z)),new M(/^fatal:\s(.+)$/,(Z,[z])=>void(Z.message=z)),new M(/([a-z0-9]+)\.\.([a-z0-9]+)\s+(\S+)\s+->\s+(\S+)$/,(Z,[z,K,$,H])=>{Z.branch.local=$,Z.hash.local=z,Z.branch.remote=H,Z.hash.remote=K})],T7=(Z,z)=>{return m(new u0,S7,[Z,z])},U6=(Z,z)=>{return Object.assign(new u0,T7(Z,z),Q9(Z,z))}}}),y7,U9,k7,$H=j({"src/lib/parsers/parse-merge.ts"(){e$(),w(),W9(),y7=[new M(/^Auto-merging\s+(.+)$/,(Z,[z])=>{Z.merges.push(z)}),new M(/^CONFLICT\s+\((.+)\): Merge conflict in (.+)$/,(Z,[z,K])=>{Z.conflicts.push(new iZ(z,K))}),new M(/^CONFLICT\s+\((.+\/delete)\): (.+) deleted in (.+) and/,(Z,[z,K,$])=>{Z.conflicts.push(new iZ(z,K,{deleteRef:$}))}),new M(/^CONFLICT\s+\((.+)\):/,(Z,[z])=>{Z.conflicts.push(new iZ(z,null))}),new M(/^Automatic merge failed;\s+(.+)$/,(Z,[z])=>{Z.result=z})],U9=(Z,z)=>{return Object.assign(k7(Z,z),U6(Z,z))},k7=(Z)=>{return m(new $9,y7,Z)}}});function b7(Z){if(!Z.length)return g("Git.merge requires at least one option");return{commands:["merge",...Z],format:"utf-8",parser(z,K){let $=U9(z,K);if($.failed)throw new EZ($);return $}}}var HH=j({"src/lib/tasks/merge.ts"(){GZ(),$H(),E()}});function VH(Z,z,K){let $=K.includes("deleted"),H=K.includes("tag")||/^refs\/tags/.test(Z),V=!K.includes("new");return{deleted:$,tag:H,branch:!H,new:!V,alreadyUpdated:V,local:Z,remote:z}}var x7,B9,h7,QH=j({"src/lib/parsers/parse-push.ts"(){w(),J9(),x7=[new M(/^Pushing to (.+)$/,(Z,[z])=>{Z.repo=z}),new M(/^updating local tracking ref '(.+)'/,(Z,[z])=>{Z.ref={...Z.ref||{},local:z}}),new M(/^[=*-]\s+([^:]+):(\S+)\s+\[(.+)]$/,(Z,[z,K,$])=>{Z.pushed.push(VH(z,K,$))}),new M(/^Branch '([^']+)' set up to track remote branch '([^']+)' from '([^']+)'/,(Z,[z,K,$])=>{Z.branch={...Z.branch||{},local:z,remote:K,remoteName:$}}),new M(/^([^:]+):(\S+)\s+([a-z0-9]+)\.\.([a-z0-9]+)$/,(Z,[z,K,$,H])=>{Z.update={head:{local:z,remote:K},hash:{from:$,to:H}}})],B9=(Z,z)=>{let K=h7(Z,z),$=Q9(Z,z);return{...K,...$}},h7=(Z,z)=>{return m({pushed:[]},x7,[Z,z])}}}),I9={};O(I9,{pushTagsTask:()=>YH,pushTask:()=>B6});function YH(Z={},z){return D(z,"--tags"),B6(Z,z)}function B6(Z={},z){let K=["push",...z];if(Z.branch)K.splice(1,0,Z.branch);if(Z.remote)K.splice(1,0,Z.remote);return K0(K,"-v"),D(K,"--verbose"),D(K,"--porcelain"),{commands:K,format:"utf-8",parser:B9}}var j9=j({"src/lib/tasks/push.ts"(){QH(),w()}});function XH(){return{showBuffer(){let Z=["show",...c(arguments,1)];if(!Z.includes("--binary"))Z.splice(1,0,"--binary");return this._runTask(N8(Z),A(arguments))},show(){let Z=["show",...c(arguments,1)];return this._runTask(f(Z),A(arguments))}}}var JH=j({"src/lib/tasks/show.ts"(){w(),E()}}),_7,F9,qH=j({"src/lib/responses/FileStatusSummary.ts"(){_7=/^(.+)\0(.+)$/,F9=class{constructor(Z,z,K){if(this.path=Z,this.index=z,this.working_dir=K,z==="R"||K==="R"){let $=_7.exec(Z)||[null,Z,Z];this.from=$[2]||"",this.path=$[1]||""}}}}});function f7(Z){let[z,K]=Z.split(FZ);return{from:K||z,to:z}}function p(Z,z,K){return[`${Z}${z}`,K]}function y0(Z,...z){return z.map((K)=>p(Z,K,($,H)=>D($.conflicted,H)))}function WH(Z,z){let K=z.trim();switch(" "){case K.charAt(2):return $(K.charAt(0),K.charAt(1),K.substr(3));case K.charAt(1):return $(" ",K.charAt(0),K.substr(2));default:return}function $(H,V,Q){let Y=`${H}${V}`,J=G9.get(Y);if(J)J(Z,Q);if(Y!=="##"&&Y!=="!!")Z.files.push(new F9(Q,H,V))}}var d7,G9,w9,UH=j({"src/lib/responses/StatusSummary.ts"(){w(),qH(),d7=class{constructor(){this.not_added=[],this.conflicted=[],this.created=[],this.deleted=[],this.ignored=void 0,this.modified=[],this.renamed=[],this.files=[],this.staged=[],this.ahead=0,this.behind=0,this.current=null,this.tracking=null,this.detached=!1,this.isClean=()=>{return!this.files.length}}},G9=new Map([p(" ","A",(Z,z)=>D(Z.created,z)),p(" ","D",(Z,z)=>D(Z.deleted,z)),p(" ","M",(Z,z)=>D(Z.modified,z)),p("A"," ",(Z,z)=>D(Z.created,z)&&D(Z.staged,z)),p("A","M",(Z,z)=>D(Z.created,z)&&D(Z.staged,z)&&D(Z.modified,z)),p("D"," ",(Z,z)=>D(Z.deleted,z)&&D(Z.staged,z)),p("M"," ",(Z,z)=>D(Z.modified,z)&&D(Z.staged,z)),p("M","M",(Z,z)=>D(Z.modified,z)&&D(Z.staged,z)),p("R"," ",(Z,z)=>{D(Z.renamed,f7(z))}),p("R","M",(Z,z)=>{let K=f7(z);D(Z.renamed,K),D(Z.modified,K.to)}),p("!","!",(Z,z)=>{D(Z.ignored=Z.ignored||[],z)}),p("?","?",(Z,z)=>D(Z.not_added,z)),...y0("A","A","U"),...y0("D","D","U"),...y0("U","A","D","U"),["##",(Z,z)=>{let K=/ahead (\d+)/,$=/behind (\d+)/,H=/^(.+?(?=(?:\.{3}|\s|$)))/,V=/\.{3}(\S*)/,Q=/\son\s([\S]+)$/,Y;Y=K.exec(z),Z.ahead=Y&&+Y[1]||0,Y=$.exec(z),Z.behind=Y&&+Y[1]||0,Y=H.exec(z),Z.current=Y&&Y[1],Y=V.exec(z),Z.tracking=Y&&Y[1],Y=Q.exec(z),Z.current=Y&&Y[1]||Z.current,Z.detached=/\(no branch\)/.test(z)}]]),w9=function(Z){let z=Z.split(FZ),K=new d7;for(let $=0,H=z.length;$<H;){let V=z[$++].trim();if(!V)continue;if(V.charAt(0)==="R")V+=FZ+(z[$++]||"");WH(K,V)}return K}}});function BH(Z){return{format:"utf-8",commands:["status","--porcelain","-b","-u","--null",...Z.filter((K)=>!L9.includes(K))],parser(K){return w9(K)}}}var L9,IH=j({"src/lib/tasks/status.ts"(){UH(),L9=["--null","-z"]}});function eZ(Z=0,z=0,K=0,$="",H=!0){return Object.defineProperty({major:Z,minor:z,patch:K,agent:$,installed:H},"toString",{value(){return`${this.major}.${this.minor}.${this.patch}`},configurable:!1,enumerable:!1})}function jH(){return eZ(0,0,0,"",!1)}function FH(){return{version(){return this._runTask({commands:["--version"],format:"utf-8",parser:GH,onError(Z,z,K,$){if(Z.exitCode===-2)return K(Buffer.from(I6));$(z)}})}}}function GH(Z){if(Z===I6)return jH();return m(eZ(0,0,0,Z),M9,Z)}var I6,M9,wH=j({"src/lib/tasks/version.ts"(){w(),I6="installed=false",M9=[new M(/version (\d+)\.(\d+)\.(\d+)(?:\s*\((.+)\))?/,(Z,[z,K,$,H=""])=>{Object.assign(Z,eZ(C(z),C(K),C($),H))}),new M(/version (\d+)\.(\d+)\.(\D+)(.+)?$/,(Z,[z,K,$,H=""])=>{Object.assign(Z,eZ(C(z),C(K),$,H))})]}}),N9={};O(N9,{SimpleGitApi:()=>l0});var l0,LH=j({"src/lib/simple-git-api.ts"(){C$(),P$(),A$(),S$(),x$(),O8(),_$(),b8(),d$(),l$(),K9(),HH(),j9(),JH(),IH(),E(),wH(),w(),l0=class{constructor(Z){this._executor=Z}_runTask(Z,z){let K=this._executor.chain(),$=K.push(Z);if(z)D$(Z,$,z);return Object.create(this,{then:{value:$.then.bind($)},catch:{value:$.catch.bind($)},_executor:{value:K}})}add(Z){return this._runTask(f(["add",...a(Z)]),A(arguments))}cwd(Z){let z=A(arguments);if(typeof Z==="string")return this._runTask(D7(Z,this._executor),z);if(typeof Z?.path==="string")return this._runTask(D7(Z.path,Z.root&&this._executor||void 0),z);return this._runTask(g("Git.cwd: workingDirectory must be supplied as a string"),z)}hashObject(Z,z){return this._runTask(f$(Z,z===!0),A(arguments))}init(Z){return this._runTask(u$(Z===!0,this._executor.cwd,c(arguments)),A(arguments))}merge(){return this._runTask(b7(c(arguments)),A(arguments))}mergeFromTo(Z,z){if(!(x(Z)&&x(z)))return this._runTask(g("Git.mergeFromTo requires that the 'remote' and 'branch' arguments are supplied as strings"));return this._runTask(b7([Z,z,...c(arguments)]),A(arguments,!1))}outputHandler(Z){return this._executor.outputHandler=Z,this}push(){let Z=B6({remote:s(arguments[0],x),branch:s(arguments[1],x)},c(arguments));return this._runTask(Z,A(arguments))}stash(){return this._runTask(f(["stash",...c(arguments)]),A(arguments))}status(){return this._runTask(BH(c(arguments)),A(arguments))}},Object.assign(l0.prototype,R$(),b$(),X$(),O$(),h$(),U$(),t$(),XH(),FH())}}),D9={};O(D9,{Scheduler:()=>C9});var c7,C9,MH=j({"src/lib/runners/scheduler.ts"(){w(),d8(),c7=(()=>{let Z=0;return()=>{Z++;let{promise:z,done:K}=v9.createDeferred();return{promise:z,done:K,id:Z}}})(),C9=class{constructor(Z=2){this.concurrency=Z,this.logger=H6("","scheduler"),this.pending=[],this.running=[],this.logger("Constructed, concurrency=%s",Z)}schedule(){if(!this.pending.length||this.running.length>=this.concurrency){this.logger("Schedule attempt ignored, pending=%s running=%s concurrency=%s",this.pending.length,this.running.length,this.concurrency);return}let Z=D(this.running,this.pending.shift());this.logger("Attempting id=%s",Z.id),Z.done(()=>{this.logger("Completing id=",Z.id),K0(this.running,Z),this.schedule()})}next(){let{promise:Z,id:z}=D(this.pending,c7());return this.logger("Scheduling id=%s",z),this.schedule(),Z}}}}),P9={};O(P9,{applyPatchTask:()=>NH});function NH(Z,z){return f(["apply",...z,...Z])}var DH=j({"src/lib/tasks/apply-patch.ts"(){E()}});function vH(Z,z){return{branch:Z,hash:z,success:!0}}function CH(Z){return{branch:Z,hash:null,success:!1}}var R9,PH=j({"src/lib/responses/BranchDeleteSummary.ts"(){R9=class{constructor(){this.all=[],this.branches={},this.errors=[]}get success(){return!this.errors.length}}}});function A9(Z,z){return z===1&&p0.test(Z)}var g7,p0,m7,X0,RH=j({"src/lib/parsers/parse-branch-delete.ts"(){PH(),w(),g7=/(\S+)\s+\(\S+\s([^)]+)\)/,p0=/^error[^']+'([^']+)'/m,m7=[new M(g7,(Z,[z,K])=>{let $=vH(z,K);Z.all.push($),Z.branches[z]=$}),new M(p0,(Z,[z])=>{let K=CH(z);Z.errors.push(K),Z.all.push(K),Z.branches[z]=K})],X0=(Z,z)=>{return m(new R9,m7,[Z,z])}}}),E9,AH=j({"src/lib/responses/BranchSummary.ts"(){E9=class{constructor(){this.all=[],this.branches={},this.current="",this.detached=!1}push(Z,z,K,$,H){if(Z==="*")this.detached=z,this.current=K;this.all.push(K),this.branches[K]={current:Z==="*",linkedWorkTree:Z==="+",name:K,commit:$,label:H}}}}});function u7(Z){return Z?Z.charAt(0):""}function O9(Z){return m(new E9,S9,Z)}var S9,EH=j({"src/lib/parsers/parse-branch.ts"(){AH(),w(),S9=[new M(/^([*+]\s)?\((?:HEAD )?detached (?:from|at) (\S+)\)\s+([a-z0-9]+)\s(.*)$/,(Z,[z,K,$,H])=>{Z.push(u7(z),!0,K,$,H)}),new M(/^([*+]\s)?(\S+)\s+([a-z0-9]+)\s?(.*)$/s,(Z,[z,K,$,H])=>{Z.push(u7(z),!1,K,$,H)})]}}),T9={};O(T9,{branchLocalTask:()=>SH,branchTask:()=>OH,containsDeleteBranchCommand:()=>y9,deleteBranchTask:()=>yH,deleteBranchesTask:()=>TH});function y9(Z){let z=["-d","-D","--delete"];return Z.some((K)=>z.includes(K))}function OH(Z){let z=y9(Z),K=["branch",...Z];if(K.length===1)K.push("-a");if(!K.includes("-v"))K.splice(1,0,"-v");return{format:"utf-8",commands:K,parser($,H){if(z)return X0($,H).all[0];return O9($)}}}function SH(){return{format:"utf-8",commands:["branch","-v"],parser:O9}}function TH(Z,z=!1){return{format:"utf-8",commands:["branch","-v",z?"-D":"-d",...Z],parser(K,$){return X0(K,$)},onError({exitCode:K,stdOut:$},H,V,Q){if(!A9(String(H),K))return Q(H);V($)}}}function yH(Z,z=!1){let K={format:"utf-8",commands:["branch","-v",z?"-D":"-d",Z],parser($,H){return X0($,H).branches[Z]},onError({exitCode:$,stdErr:H,stdOut:V},Q,Y,J){if(!A9(String(Q),$))return J(Q);throw new EZ(K.parser(RZ(V),RZ(H)),String(Q))}};return K}var kH=j({"src/lib/tasks/branch.ts"(){GZ(),RH(),EH(),w()}}),k9,bH=j({"src/lib/responses/CheckIgnore.ts"(){k9=(Z)=>{return Z.split(/\n/g).map((z)=>z.trim()).filter((z)=>!!z)}}}),b9={};O(b9,{checkIgnoreTask:()=>xH});function xH(Z){return{commands:["check-ignore",...Z],format:"utf-8",parser:k9}}var hH=j({"src/lib/tasks/check-ignore.ts"(){bH()}}),x9={};O(x9,{cloneMirrorTask:()=>fH,cloneTask:()=>h9});function _H(Z){return/^--upload-pack(=|$)/.test(Z)}function h9(Z,z,K){let $=["clone",...K];if(x(Z)&&$.push(Z),x(z)&&$.push(z),$.find(_H))return g("git.fetch: potential exploit argument blocked.");return f($)}function fH(Z,z,K){return D(K,"--mirror"),h9(Z,z,K)}var dH=j({"src/lib/tasks/clone.ts"(){E(),w()}});function cH(Z,z){return m({raw:Z,remote:null,branches:[],tags:[],updated:[],deleted:[]},_9,[Z,z])}var _9,gH=j({"src/lib/parsers/parse-fetch.ts"(){w(),_9=[new M(/From (.+)$/,(Z,[z])=>{Z.remote=z}),new M(/\* \[new branch]\s+(\S+)\s*-> (.+)$/,(Z,[z,K])=>{Z.branches.push({name:z,tracking:K})}),new M(/\* \[new tag]\s+(\S+)\s*-> (.+)$/,(Z,[z,K])=>{Z.tags.push({name:z,tracking:K})}),new M(/- \[deleted]\s+\S+\s*-> (.+)$/,(Z,[z])=>{Z.deleted.push({tracking:z})}),new M(/\s*([^.]+)\.\.(\S+)\s+(\S+)\s*-> (.+)$/,(Z,[z,K,$,H])=>{Z.updated.push({name:$,tracking:H,to:K,from:z})})]}}),f9={};O(f9,{fetchTask:()=>uH});function mH(Z){return/^--upload-pack(=|$)/.test(Z)}function uH(Z,z,K){let $=["fetch",...K];if(Z&&z)$.push(Z,z);if($.find(mH))return g("git.fetch: potential exploit argument blocked.");return{commands:$,format:"utf-8",parser:cH}}var lH=j({"src/lib/tasks/fetch.ts"(){gH(),E()}});function pH(Z){return m({moves:[]},d9,Z)}var d9,oH=j({"src/lib/parsers/parse-move.ts"(){w(),d9=[new M(/^Renaming (.+) to (.+)$/,(Z,[z,K])=>{Z.moves.push({from:z,to:K})})]}}),c9={};O(c9,{moveTask:()=>nH});function nH(Z,z){return{commands:["mv","-v",...a(Z),z],format:"utf-8",parser:pH}}var iH=j({"src/lib/tasks/move.ts"(){oH(),w()}}),g9={};O(g9,{pullTask:()=>aH});function aH(Z,z,K){let $=["pull",...K];if(Z&&z)$.splice(1,0,Z,z);return{commands:$,format:"utf-8",parser(H,V){return U6(H,V)},onError(H,V,Q,Y){let J=KH(RZ(H.stdOut),RZ(H.stdErr));if(J)return Y(new EZ(J));Y(V)}}}var sH=j({"src/lib/tasks/pull.ts"(){GZ(),W9(),w()}});function rH(Z){let z={};return m9(Z,([K])=>z[K]={name:K}),Object.values(z)}function tH(Z){let z={};return m9(Z,([K,$,H])=>{if(!z.hasOwnProperty(K))z[K]={name:K,refs:{fetch:"",push:""}};if(H&&$)z[K].refs[H.replace(/[^a-z]/g,"")]=$}),Object.values(z)}function m9(Z,z){i0(Z,(K)=>z(K.split(/\s+/)))}var eH=j({"src/lib/responses/GetRemoteSummary.ts"(){w()}}),u9={};O(u9,{addRemoteTask:()=>ZV,getRemotesTask:()=>zV,listRemotesTask:()=>KV,remoteTask:()=>$V,removeRemoteTask:()=>HV});function ZV(Z,z,K){return f(["remote","add",...K,Z,z])}function zV(Z){let z=["remote"];if(Z)z.push("-v");return{commands:z,format:"utf-8",parser:Z?tH:rH}}function KV(Z){let z=[...Z];if(z[0]!=="ls-remote")z.unshift("ls-remote");return f(z)}function $V(Z){let z=[...Z];if(z[0]!=="remote")z.unshift("remote");return f(z)}function HV(Z){return f(["remote","remove",Z])}var VV=j({"src/lib/tasks/remote.ts"(){eH(),E()}}),l9={};O(l9,{stashListTask:()=>QV});function QV(Z={},z){let K=z9(Z),$=["stash","list",...K.commands,...z],H=r8(K.splitter,K.fields,Q6($));return Y0($)||{commands:$,format:"utf-8",parser:H}}var YV=j({"src/lib/tasks/stash-list.ts"(){yZ(),e8(),W6(),K9()}}),p9={};O(p9,{addSubModuleTask:()=>XV,initSubModuleTask:()=>JV,subModuleTask:()=>J0,updateSubModuleTask:()=>qV});function XV(Z,z){return J0(["add",Z,z])}function JV(Z){return J0(["init",...Z])}function J0(Z){let z=[...Z];if(z[0]!=="submodule")z.unshift("submodule");return f(z)}function qV(Z){return J0(["update",...Z])}var WV=j({"src/lib/tasks/sub-module.ts"(){E()}});function UV(Z,z){let K=isNaN(Z),$=isNaN(z);if(K!==$)return K?1:-1;return K?o9(Z,z):0}function o9(Z,z){return Z===z?0:Z>z?1:-1}function BV(Z){return Z.trim()}function lZ(Z){if(typeof Z==="string")return parseInt(Z.replace(/^\D+/g,""),10)||0;return 0}var l7,n9,IV=j({"src/lib/responses/TagList.ts"(){l7=class{constructor(Z,z){this.all=Z,this.latest=z}},n9=function(Z,z=!1){let K=Z.split(`
`).map(BV).filter(Boolean);if(!z)K.sort(function(H,V){let Q=H.split("."),Y=V.split(".");if(Q.length===1||Y.length===1)return UV(lZ(Q[0]),lZ(Y[0]));for(let J=0,U=Math.max(Q.length,Y.length);J<U;J++){let X=o9(lZ(Q[J]),lZ(Y[J]));if(X)return X}return 0});let $=z?K[0]:[...K].reverse().find((H)=>H.indexOf(".")>=0);return new l7(K,$)}}}),i9={};O(i9,{addAnnotatedTagTask:()=>GV,addTagTask:()=>FV,tagListTask:()=>jV});function jV(Z=[]){let z=Z.some((K)=>/^--sort=/.test(K));return{format:"utf-8",commands:["tag","-l",...Z],parser(K){return n9(K,z)}}}function FV(Z){return{format:"utf-8",commands:["tag",Z],parser(){return{name:Z}}}}function GV(Z,z){return{format:"utf-8",commands:["tag","-a","-m",z,Z],parser(){return{name:Z}}}}var wV=j({"src/lib/tasks/tag.ts"(){IV()}}),LV=b5({"src/git.js"(Z,z){var{GitExecutor:K}=(N$(),R(g8)),{SimpleGitApi:$}=(LH(),R(N9)),{Scheduler:H}=(MH(),R(D9)),{configurationErrorTask:V}=(E(),R(d0)),{asArray:Q,filterArray:Y,filterPrimitives:J,filterString:U,filterStringOrStringArray:X,filterType:q,getTrailingOptions:W,trailingFunctionArgument:B,trailingOptionsArgument:N}=(w(),R(W8)),{applyPatchTask:L}=(DH(),R(P9)),{branchTask:P,branchLocalTask:h,deleteBranchesTask:k,deleteBranchTask:T}=(kH(),R(T9)),{checkIgnoreTask:S}=(hH(),R(b9)),{checkIsRepoTask:$Z}=(j8(),R(U8)),{cloneTask:e,cloneMirrorTask:q0}=(dH(),R(x9)),{cleanWithOptionsTask:kZ,isCleanOptionsArray:W0}=(R8(),R(C8)),{diffSummaryTask:r9}=(W6(),R(Z9)),{fetchTask:t9}=(lH(),R(f9)),{moveTask:e9}=(iH(),R(c9)),{pullTask:Zz}=(sH(),R(g9)),{pushTagsTask:zz}=(j9(),R(I9)),{addRemoteTask:Kz,getRemotesTask:$z,listRemotesTask:Hz,remoteTask:Vz,removeRemoteTask:Qz}=(VV(),R(u9)),{getResetMode:Yz,resetTask:Xz}=(f8(),R(x8)),{stashListTask:Jz}=(YV(),R(l9)),{addSubModuleTask:qz,initSubModuleTask:Wz,subModuleTask:Uz,updateSubModuleTask:Bz}=(WV(),R(p9)),{addAnnotatedTagTask:Iz,addTagTask:jz,tagListTask:Fz}=(wV(),R(i9)),{straightThroughBufferTask:Gz,straightThroughStringTask:i}=(E(),R(d0));function G(I,F){this._plugins=F,this._executor=new K(I.baseDir,new H(I.maxConcurrentProcesses),F),this._trimmed=I.trimmed}(G.prototype=Object.create($.prototype)).constructor=G,G.prototype.customBinary=function(I){return this._plugins.reconfigure("binary",I),this},G.prototype.env=function(I,F){if(arguments.length===1&&typeof I==="object")this._executor.env=I;else(this._executor.env=this._executor.env||{})[I]=F;return this},G.prototype.stashList=function(I){return this._runTask(Jz(N(arguments)||{},Y(I)&&I||[]),B(arguments))};function F6(I,F,v,_){if(typeof v!=="string")return V(`git.${I}() requires a string 'repoPath'`);return F(v,q(_,U),W(arguments))}G.prototype.clone=function(){return this._runTask(F6("clone",e,...arguments),B(arguments))},G.prototype.mirror=function(){return this._runTask(F6("mirror",q0,...arguments),B(arguments))},G.prototype.mv=function(I,F){return this._runTask(e9(I,F),B(arguments))},G.prototype.checkoutLatestTag=function(I){var F=this;return this.pull(function(){F.tags(function(v,_){F.checkout(_.latest,I)})})},G.prototype.pull=function(I,F,v,_){return this._runTask(Zz(q(I,U),q(F,U),W(arguments)),B(arguments))},G.prototype.fetch=function(I,F){return this._runTask(t9(q(I,U),q(F,U),W(arguments)),B(arguments))},G.prototype.silent=function(I){return console.warn("simple-git deprecation notice: git.silent: logging should be configured using the `debug` library / `DEBUG` environment variable, this will be an error in version 3"),this},G.prototype.tags=function(I,F){return this._runTask(Fz(W(arguments)),B(arguments))},G.prototype.rebase=function(){return this._runTask(i(["rebase",...W(arguments)]),B(arguments))},G.prototype.reset=function(I){return this._runTask(Xz(Yz(I),W(arguments)),B(arguments))},G.prototype.revert=function(I){let F=B(arguments);if(typeof I!=="string")return this._runTask(V("Commit must be a string"),F);return this._runTask(i(["revert",...W(arguments,0,!0),I]),F)},G.prototype.addTag=function(I){let F=typeof I==="string"?jz(I):V("Git.addTag requires a tag name");return this._runTask(F,B(arguments))},G.prototype.addAnnotatedTag=function(I,F){return this._runTask(Iz(I,F),B(arguments))},G.prototype.deleteLocalBranch=function(I,F,v){return this._runTask(T(I,typeof F==="boolean"?F:!1),B(arguments))},G.prototype.deleteLocalBranches=function(I,F,v){return this._runTask(k(I,typeof F==="boolean"?F:!1),B(arguments))},G.prototype.branch=function(I,F){return this._runTask(P(W(arguments)),B(arguments))},G.prototype.branchLocal=function(I){return this._runTask(h(),B(arguments))},G.prototype.raw=function(I){let F=!Array.isArray(I),v=[].slice.call(F?arguments:I,0);for(let n=0;n<v.length&&F;n++)if(!J(v[n])){v.splice(n,v.length-n);break}v.push(...W(arguments,0,!0));var _=B(arguments);if(!v.length)return this._runTask(V("Raw: must supply one or more command to execute"),_);return this._runTask(i(v,this._trimmed),_)},G.prototype.submoduleAdd=function(I,F,v){return this._runTask(qz(I,F),B(arguments))},G.prototype.submoduleUpdate=function(I,F){return this._runTask(Bz(W(arguments,!0)),B(arguments))},G.prototype.submoduleInit=function(I,F){return this._runTask(Wz(W(arguments,!0)),B(arguments))},G.prototype.subModule=function(I,F){return this._runTask(Uz(W(arguments)),B(arguments))},G.prototype.listRemote=function(){return this._runTask(Hz(W(arguments)),B(arguments))},G.prototype.addRemote=function(I,F,v){return this._runTask(Kz(I,F,W(arguments)),B(arguments))},G.prototype.removeRemote=function(I,F){return this._runTask(Qz(I),B(arguments))},G.prototype.getRemotes=function(I,F){return this._runTask($z(I===!0),B(arguments))},G.prototype.remote=function(I,F){return this._runTask(Vz(W(arguments)),B(arguments))},G.prototype.tag=function(I,F){let v=W(arguments);if(v[0]!=="tag")v.unshift("tag");return this._runTask(i(v),B(arguments))},G.prototype.updateServerInfo=function(I){return this._runTask(i(["update-server-info"]),B(arguments))},G.prototype.pushTags=function(I,F){let v=zz({remote:q(I,U)},W(arguments));return this._runTask(v,B(arguments))},G.prototype.rm=function(I){return this._runTask(i(["rm","-f",...Q(I)]),B(arguments))},G.prototype.rmKeepLocal=function(I){return this._runTask(i(["rm","--cached",...Q(I)]),B(arguments))},G.prototype.catFile=function(I,F){return this._catFile("utf-8",arguments)},G.prototype.binaryCatFile=function(){return this._catFile("buffer",arguments)},G.prototype._catFile=function(I,F){var v=B(F),_=["cat-file"],n=F[0];if(typeof n==="string")return this._runTask(V("Git.catFile: options must be supplied as an array of strings"),v);if(Array.isArray(n))_.push.apply(_,n);let U0=I==="buffer"?Gz(_):i(_);return this._runTask(U0,v)},G.prototype.diff=function(I,F){let v=U(I)?V("git.diff: supplying options as a single string is no longer supported, switch to an array of strings"):i(["diff",...W(arguments)]);return this._runTask(v,B(arguments))},G.prototype.diffSummary=function(){return this._runTask(r9(W(arguments,1)),B(arguments))},G.prototype.applyPatch=function(I){let F=!X(I)?V("git.applyPatch requires one or more string patches as the first argument"):L(Q(I),W([].slice.call(arguments,1)));return this._runTask(F,B(arguments))},G.prototype.revparse=function(){let I=["rev-parse",...W(arguments,!0)];return this._runTask(i(I,!0),B(arguments))},G.prototype.clean=function(I,F,v){let _=W0(I),n=_&&I.join("")||q(I,U)||"",U0=W([].slice.call(arguments,_?1:0));return this._runTask(kZ(n,U0),B(arguments))},G.prototype.exec=function(I){let F={commands:[],format:"utf-8",parser(){if(typeof I==="function")I()}};return this._runTask(F)},G.prototype.clearQueue=function(){return this},G.prototype.checkIgnore=function(I,F){return this._runTask(S(Q(q(I,X,[]))),B(arguments))},G.prototype.checkIsRepo=function(I,F){return this._runTask($Z(q(I,U)),B(arguments))},z.exports=G}});AZ();KZ();var MV=class extends t{constructor(Z,z){super(void 0,z);this.config=Z}};KZ();KZ();var r=class extends t{constructor(Z,z,K){super(Z,K);this.task=Z,this.plugin=z,Object.setPrototypeOf(this,new.target.prototype)}};GZ();s7();j8();R8();O8();T8();b8();f8();function NV(Z){if(!Z)return;return[{type:"spawn.before",action($,H){if(Z.aborted)H.kill(new r(void 0,"abort","Abort already signaled"))}},{type:"spawn.after",action($,H){function V(){H.kill(new r(void 0,"abort","Abort signal received"))}Z.addEventListener("abort",V),H.spawned.on("close",()=>Z.removeEventListener("abort",V))}}]}function DV(Z){return typeof Z==="string"&&Z.trim().toLowerCase()==="-c"}function vV(Z,z){if(!DV(Z))return;if(!/^\s*protocol(.[a-z]+)?.allow/.test(z))return;throw new r(void 0,"unsafe","Configuring protocol.allow is not permitted without enabling allowUnsafeExtProtocol")}function CV(Z,z){if(/^\s*--(upload|receive)-pack/.test(Z))throw new r(void 0,"unsafe","Use of --upload-pack or --receive-pack is not permitted without enabling allowUnsafePack");if(z==="clone"&&/^\s*-u\b/.test(Z))throw new r(void 0,"unsafe","Use of clone with option -u is not permitted without enabling allowUnsafePack");if(z==="push"&&/^\s*--exec\b/.test(Z))throw new r(void 0,"unsafe","Use of push with option --exec is not permitted without enabling allowUnsafePack")}function PV({allowUnsafeProtocolOverride:Z=!1,allowUnsafePack:z=!1}={}){return{type:"spawn.args",action(K,$){return K.forEach((H,V)=>{let Q=V<K.length?K[V+1]:"";Z||vV(H,Q),z||CV(H,$.method)}),K}}}w();function RV(Z){let z=PZ(Z,"-c");return{type:"spawn.args",action(K){return[...z,...K]}}}w();var p7=jZ.deferred().promise;function AV({onClose:Z=!0,onExit:z=50}={}){function K(){let H=-1,V={close:jZ.deferred(),closeTimeout:jZ.deferred(),exit:jZ.deferred(),exitTimeout:jZ.deferred()},Q=Promise.race([Z===!1?p7:V.closeTimeout.promise,z===!1?p7:V.exitTimeout.promise]);return $(Z,V.close,V.closeTimeout),$(z,V.exit,V.exitTimeout),{close(Y){H=Y,V.close.done()},exit(Y){H=Y,V.exit.done()},get exitCode(){return H},result:Q}}function $(H,V,Q){if(H===!1)return;(H===!0?V.promise:V.promise.then(()=>k0(H))).then(Q.done)}return{type:"spawn.after",async action(H,{spawned:V,close:Q}){let Y=K(),J=!0,U=()=>void(J=!1);V.stdout?.on("data",U),V.stderr?.on("data",U),V.on("error",U),V.on("close",(X)=>Y.close(X)),V.on("exit",(X)=>Y.exit(X));try{if(await Y.result,J)await k0(50);Q(Y.exitCode)}catch(X){Q(Y.exitCode,X)}}}}w();var EV="Invalid value supplied for custom binary, requires a single string or an array containing either one or two strings",o7="Invalid value supplied for custom binary, restricted characters must be removed or supply the unsafe.allowUnsafeCustomBinary option";function OV(Z){return!Z||!/^([a-z]:)?([a-z0-9/.\\_-]+)$/i.test(Z)}function n7(Z,z){if(Z.length<1||Z.length>2)throw new r(void 0,"binary",EV);if(Z.some(OV))if(z)console.warn(o7);else throw new r(void 0,"binary",o7);let[$,H]=Z;return{binary:$,prefix:H}}function SV(Z,z=["git"],K=!1){let $=n7(a(z),K);Z.on("binary",(H)=>{$=n7(a(H),K)}),Z.append("spawn.binary",()=>{return $.binary}),Z.append("spawn.args",(H)=>{return $.prefix?[$.prefix,...H]:H})}KZ();function TV(Z){return!!(Z.exitCode&&Z.stdErr.length)}function yV(Z){return Buffer.concat([...Z.stdOut,...Z.stdErr])}function kV(Z=!1,z=TV,K=yV){return($,H)=>{if(!Z&&$||!z(H))return $;return K(H)}}function i7(Z){return{type:"task.error",action(z,K){let $=Z(z.error,{stdErr:K.stdErr,stdOut:K.stdOut,exitCode:K.exitCode});if(Buffer.isBuffer($))return{error:new t(void 0,$.toString("utf-8"))};return{error:$}}}}w();var xV=class{constructor(){this.plugins=new Set,this.events=new bV}on(Z,z){this.events.on(Z,z)}reconfigure(Z,z){this.events.emit(Z,z)}append(Z,z){let K=D(this.plugins,{type:Z,action:z});return()=>this.plugins.delete(K)}add(Z){let z=[];return a(Z).forEach((K)=>K&&this.plugins.add(D(z,K))),()=>{z.forEach((K)=>this.plugins.delete(K))}}exec(Z,z,K){let $=z,H=Object.freeze(Object.create(K));for(let V of this.plugins)if(V.type===Z)$=V.action($,H);return $}};w();function hV(Z){let K=["checkout","clone","fetch","pull","push"];return[{type:"spawn.args",action(V,Q){if(!K.includes(Q.method))return V;return K8(V,"--progress")}},{type:"spawn.after",action(V,Q){if(!Q.commands.includes("--progress"))return;Q.spawned.stderr?.on("data",(Y)=>{let J=/^([\s\S]+?):\s*(\d+)% \((\d+)\/(\d+)\)/.exec(Y.toString("utf8"));if(!J)return;Z({method:Q.method,stage:_V(J[1]),progress:C(J[2]),processed:C(J[3]),total:C(J[4])})})}}]}function _V(Z){return String(Z.toLowerCase().split(" ",1))||"unknown"}w();function fV(Z){let z=V8(Z,["uid","gid"]);return{type:"spawn.options",action(K){return{...z,...K}}}}function dV({block:Z,stdErr:z=!0,stdOut:K=!0}){if(Z>0)return{type:"spawn.after",action($,H){let V;function Q(){V&&clearTimeout(V),V=setTimeout(J,Z)}function Y(){H.spawned.stdout?.off("data",Q),H.spawned.stderr?.off("data",Q),H.spawned.off("exit",Y),H.spawned.off("close",Y),V&&clearTimeout(V)}function J(){Y(),H.kill(new r(void 0,"timeout","block timeout reached"))}K&&H.spawned.stdout?.on("data",Q),z&&H.spawned.stderr?.on("data",Q),H.spawned.on("exit",Y),H.spawned.on("close",Y),Q()}}}AZ();function cV(){return{type:"spawn.args",action(Z){let z=[],K;function $(H){(K=K||[]).push(...H)}for(let H=0;H<Z.length;H++){let V=Z[H];if(aZ(V)){$(w7(V));continue}if(V==="--"){$(Z.slice(H+1).flatMap((Q)=>aZ(Q)&&w7(Q)||Q));break}z.push(V)}return!K?z:[...z,"--",...K.map(String)]}}}w();var gV=LV();function mV(Z,z){let K=new xV,$=J8(Z&&(typeof Z==="string"?{baseDir:Z}:Z)||{},z);if(!a0($.baseDir))throw new MV($,"Cannot use simple-git on a directory that does not exist");if(Array.isArray($.config))K.add(RV($.config));return K.add(PV($.unsafe)),K.add(cV()),K.add(AV($.completion)),$.abort&&K.add(NV($.abort)),$.progress&&K.add(hV($.progress)),$.timeout&&K.add(dV($.timeout)),$.spawnOptions&&K.add(fV($.spawnOptions)),K.add(i7(kV(!0))),$.errors&&K.add(i7($.errors)),SV(K,$.binary,$.unsafe?.allowUnsafeCustomBinary),new gV($,K)}GZ();var j6=mV;async function s9(Z){let z=Date.now(),K=await a9.default({ignoreFiles:Z?.ignoreFiles??[".omniignore",".gitignore",".npmignore",".dockerignore"],includeEmpty:!1,path:Z?.startDir??process.cwd(),follow:!1}),$=Z?.filesToUpdate??["package.json","Cargo.toml"],H=Z?.versionRegex??/0.0.0-semantically-released/g,V=process.cwd(),Q="",Y=/^(0|[1-9][0-9]*)\.(0|[1-9][0-9]*)\.(0|[1-9][0-9]*)(?:-((?:0|[1-9][0-9]*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9][0-9]*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;if(await Bun.file(Z?.versionFile??`${V}/.version`).exists())Q=(await Bun.file(`${V}/.version`).text()).trim(),console.log(`Found version file containing: ${Q}`);else{let X=(await j6().tag(["--points-at","HEAD"])).trim();if(!X)X=`v0.0.0-${(await j6().revparse(["HEAD"])).trim()}`;if(!X)console.error("Failed to determine version"),process.exit(1);console.log(`Found version: ${X}`),Q=(X.startsWith("v")?X.slice(1):X).trim()}if(!Y.test(Q))console.error(`Invalid version format: ${Q}`),process.exit(1);console.log(`Applying version: ${Q}`);for(let X of K)for(let q of $)if(X.endsWith(q)){let W=await Bun.file(X).text();if(H.test(W)){let B=W.replace(H,Q);await Bun.file(X).write(B),console.log(`Applied version in ${X}`)}}let U=Date.now()-z;console.log(`Applied version in ${U}ms`)}await s9();
