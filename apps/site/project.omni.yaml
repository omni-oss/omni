# yaml-language-server: $schema=https://raw.githubusercontent.com/omni-oss/omni/refs/heads/json-schemas/project-latest.json
name: "@omni-oss/site"

extends:
  - "@workspace/omni/presets/ts-app.omni.yaml"

cache:
  key:
    files:
      append:
        - panda.config.ts
        - vite.config.ts

tasks:
  test:
    enabled: false

  test:unit:
    enabled: false

  test:integration:
    enabled: false

  gen:declspec:
    command: bun run gen:declspec
    output:
      files:
        - ./omni-declspec.json

  gen:refdocs:
    cache:
      key:
        files:
          append:
            - ./scripts/generate-references/**/*
            - ./omni-declspec.json

    dependencies:
      - gen:declspec
    command: bun run gen:refdocs
    output:
      files:
        - content/docs/references/**/*

  gen:
    dependencies:
      - gen:refdocs

  prepare: bun x panda codegen

  build:
    enabled: true
    dependencies:
      - prepare
      - gen:refdocs

    output:
      files:
        - .vercel/**/*
